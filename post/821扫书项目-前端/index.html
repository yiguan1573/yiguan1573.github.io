<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="referrer" content="never">

    
    <meta property="og:site_name" content="亿观的博客">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://yiguan1573.gitee.io//img/01.jpg">
    <meta property="twitter:image" content="https://yiguan1573.gitee.io//img/01.jpg" />
    

    
    <meta name="title" content="1、前端(扫书项目)" />
    <meta property="og:title" content="1、前端(扫书项目)" />
    <meta property="twitter:title" content="1、前端(扫书项目)" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>1、前端(扫书项目) | yiguan1573</title>

    <link rel="canonical" href="/post/821%E6%89%AB%E4%B9%A6%E9%A1%B9%E7%9B%AE-%E5%89%8D%E7%AB%AF/">

    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css" rel="stylesheet" type="text/css">

    
    

    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">亿观的博客</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">首页</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/%E5%AD%A6%E4%B9%A0">学习</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/archive/">档案</a></li>
                    
                        <li><a href="/top/about/">关于</a></li>
                    

                    
		    <li>
                        <a href="/search"><i class="fa fa-search"></i></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('http://ww1.sinaimg.cn/large/006QQPIfly1gh0wuilf8mj31hc0u0kh8.jpg')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/%E9%A1%B9%E7%9B%AE" title="项目">
                            项目
                        </a>
                        
                    </div>
                    <h1>1、前端(扫书项目)</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by 
                            
                                     &#34;亿观&#34;
                             
                            on 
                            Tuesday, November 24, 2020
                            
                                <span id="/post/821%E6%89%AB%E4%B9%A6%E9%A1%B9%E7%9B%AE-%E5%89%8D%E7%AB%AF/" class="leancloud_visitors meta_data_item" data-flag-title="">
    <span class="post-meta-item-icon">
      <span class="octicon octicon-eye"></span> 
    </span>
    <i class="fa fa-eye"></i>
    <span class="old-visitors-count" style="display: none;"></span>
    <span class="leancloud-visitors-count"></span>
</span>



<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>

<script>
	AV.initialize("", "");
</script>

<script type="text/javascript">
function showTime(Counter) {
    var query = new AV.Query(Counter);
    var entries = [];
    var $visitors = $(".leancloud_visitors");

    $visitors.each(function() {
        entries.push($(this).attr("id").trim());
    });

    query.containedIn('url', entries);
    query.find()
        .done(function(results) {
            var COUNT_CONTAINER_REF = '.leancloud-visitors-count';
            var OLD_COUNT_CONTAINER_REF = '.old-visitors-count';

            
            
            
            

            for (var i = 0; i < results.length; i++) {
                var item = results[i];
                var url = item.get('url');
                var time = item.get('time');
                var element = document.getElementById(url);

                $(element).find(COUNT_CONTAINER_REF).text(time);
            }
            for (var i = 0; i < entries.length; i++) {
                var url = entries[i];
                var element = document.getElementById(url);
                var countSpan = $(element).find(COUNT_CONTAINER_REF);
                if (countSpan.text() == '') {
                    var oldCountSpan = $(element).find(OLD_COUNT_CONTAINER_REF).text();
                    if(oldCountSpan!=''){
                        countSpan.text(0+parseInt(oldCountSpan));
                    }else{
                        countSpan.text(0);          
                    }
                }
            }
        })
        .fail(function(object, error) {
            console.log("Error: " + error.code + " " + error.message);
        });
}

function addCount(Counter) {
    var $visitors = $(".leancloud_visitors");
    var url = $visitors.attr('id').trim();
    var title = $visitors.attr('data-flag-title').trim();
    var query = new AV.Query(Counter);

    query.equalTo("url", url);
    query.find({
        success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment("time");
                counter.save(null, {
                    success: function(counter) {
                        var $element = $(document.getElementById(url));
                        $element.find('.leancloud-visitors-count').text(counter.get('time'));
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
                var newcounter = new Counter();
                 
                var acl = new AV.ACL();
                acl.setPublicReadAccess(true);
                acl.setPublicWriteAccess(true);
                newcounter.setACL(acl);
                 
                newcounter.set("title", title);
                newcounter.set("url", url);
                var OLD_COUNT_CONTAINER_REF = '.old-visitors-count';
                var $element = $(document.getElementById(url));
                var oldCountSpan = $element.find(OLD_COUNT_CONTAINER_REF).text();
                if(oldCountSpan!=''){
                    newcounter.set("time", parseInt(oldCountSpan)+1);
                }else{
 	                    newcounter.set("time",  1);
                }
                newcounter.save(null, {
                    success: function(newcounter) {
                        var $element = $(document.getElementById(url));
                        $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                    },
                    error: function(newcounter, error) {
                        console.log('Failed to create');
                    }
                });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + " " + error.message);
        }
    });
}
$(function() {
    var Counter = AV.Object.extend("Counter");
    
    
    if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
    } else {
        showTime(Counter);
    }
});
</script>

                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h2 id="el-popover点击里面的文本时-文本会有一个框">el-popover点击里面的文本时 文本会有一个框</h2>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1gltbckvwvpj306n05bq3l.jpg" alt="QQ截图20201219174714.png">

</p>
<ul>
<li>解决：在显示的标签盒子加以下属性

  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1gltbjp6d82j307o01k3ya.jpg" alt="QQ截图20201219180022.png">

</li>
</ul>
<h2 id="vue-引用-animatecss-动画不生效">Vue 引用 animate.css 动画不生效</h2>
<ul>
<li>不能安装最新版本</li>
</ul>
<pre><code>
npm install animate.css@3.5.1 --save


Vue文件中全局引入：
import animated from &quot;animate.css&quot;
Vue.use(animated)
</code></pre><h2 id="el-upload-图片选取但未上传-base64编码图片回显">el-upload 图片选取但未上传， Base64编码图片回显</h2>
<ul>
<li>有时我们需要把选取和上传分开处理，比如上传图片，先选取文件提交到前端，图片处理后再把base64内容提交到后台。</li>
</ul>
<pre><code>&lt;template&gt;
	&lt;el-upload
	  class=&quot;avatar-uploader&quot;
	  action=&quot;&quot;
		:auto-upload=&quot;false&quot;
	  :show-file-list=&quot;false&quot;
		:on-change=&quot;changeFile&quot;
	  &gt;
	  &lt;img v-if=&quot;imageUrl&quot; :src=&quot;imageUrl&quot; class=&quot;avatar&quot;&gt;
	  &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot;&gt;&lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过2M&lt;/div&gt;&lt;/i&gt;
		
	&lt;/el-upload&gt;
&lt;/template&gt;

&lt;script&gt;
	export default {
		name: 'uploadImg',
		data() {
			return {
				imageUrl: '',
				imageBaseUrl: ''
			}
		},
		methods: {
			changeFile(file, fileList) {
				const isIMAGE = (file.raw.type === 'image/jpeg' || file.raw.type === 'image/png');
				const isLt2M = file.size / 1024 / 1024 &lt; 2;
				if (!isIMAGE) {
					this.$message.error('上传的文件格式错误!');
					return;
				}
				if (!isLt2M) {
					this.$message.error('上传封面大小不能超过 2MB!');
					return;
				}
				var This = this;
				var reader = new FileReader();
				reader.readAsDataURL(file.raw);
				reader.onload = function(e){
						this.result; //base64编码
						This.imageBaseUrl = this.result;
						This.imageUrl = this.result;
				}
			}
		}
	}
&lt;/script&gt;

&lt;style&gt;
	 .avatar-uploader .el-upload {
	    border: 1px dashed #d9d9d9;
	    border-radius: 6px;
	    cursor: pointer;
	    position: relative;
	    overflow: hidden;
	  }
	  .avatar-uploader .el-upload:hover {
	    border-color: #409EFF;
	  }
	  .avatar-uploader-icon {
	    font-size: 28px;
	    color: #8c939d;
	    width: 220px;
	    height: 260px;
	    line-height: 220px;
	    text-align: center;
	  }
	  .avatar {
	    width: 220px;
	    height: 260px;
	    display: block;
	  }
		.el-upload__tip {
			position: absolute;
			top: 50px;
			left: 10px;
		}
&lt;/style&gt;
</code></pre><h2 id="el-upload-向父组件传递url">el-upload 向父组件传递url</h2>
<ul>
<li>el-upload 向父组件传递url时会出现URL为空的现象，需要在子组件异步传递url</li>
<li>子组件方法添加</li>
</ul>
<pre><code>	setTimeout(() =&gt; {
				this.$emit('showImg',this.imageUrl)
			}, 1000)
</code></pre><ul>
<li>父组件</li>
</ul>
<pre><code>	changeImg(imageUrl) {
		this.circleUrl = imageUrl
	}
</code></pre><p><a href="https://markix.blog.csdn.net/article/details/105914557">vue $emit 同步调用</a></p>
<h2 id="el-upload-向-el-avatar-传递url出现一下情况">el-upload 向 el-avatar 传递url出现一下情况</h2>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfgy1gmhy7i5kfqj30u90cm4eg.jpg" alt="QQ截图20210110011744.png">

</p>
<ul>
<li>目前没有发现问题所在（笑~~），建议直接替换为以下</li>
</ul>
<pre><code>&lt;img :src=&quot;circleUrl&quot; class=&quot;avatar portrait headPortrait&quot;&gt;


.modifyImgItem .headPortrait{
	width: 220px;
	height: 220px;
	border-radius: 110px;
	margin-top: 35px;
	float: left;
}
</code></pre><h2 id="carousel-走马灯卡片化点击进入内容页">Carousel 走马灯卡片化点击进入内容页</h2>
<ul>
<li>在点击两侧时会进行幻灯片切换，如果直接给幻灯片组件绑定事件进行路由跳转，再点击两侧不会进行幻灯片切换，会直接进入详情页。</li>
<li>所以需求如下：<strong>仅在点击中间的幻灯片时会跳转，点击两侧时会切换幻灯片</strong></li>
</ul>
<pre><code>&lt;template&gt;
	&lt;el-carousel :interval=&quot;4000&quot; type=&quot;card&quot; height=&quot;300px&quot; @change=&quot;activeIndex&quot;&gt;
	&lt;el-carousel-item v-for=&quot;item in 6&quot; :key=&quot;item&quot; @click.native=&quot;toDetails(item)&quot;&gt;
		&lt;!-- &lt;h3 class=&quot;medium&quot;&gt;{{ item }}&lt;/h3&gt; --&gt;
		&lt;Novel2&gt;&lt;/Novel2&gt;
	&lt;/el-carousel-item&gt;
	&lt;/el-carousel&gt;
&lt;/template&gt;

&lt;script&gt;
	import Novel2 from &quot;./Novel2.vue&quot;
	export default {
		name: 'carousel',
		data() {
			return {
				id: '1',
				key1: '',
				key2: ''
			}
		},
		components: {
			Novel2
		},
		methods: {
			activeIndex(key1,key2) {
				setTimeout(() =&gt; {
							this.key1 = key1
							this.key2 = key2
						}, 200)				
			},
			toDetails(item) {
				if(this.key1 == item-1){
					this.$router.push({
						path: '/details/'+this.id
					})
				}
			}
		}
	}
&lt;/script&gt;

&lt;style&gt;
	.el-carousel__item  {
		border-radius: 8px;
		transition: all 0.8s;
	}
	.el-carousel__item:hover  {
		box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.3);
	}
	.el-carousel__item:nth-child(2n) {
		background-color: #99a9bf;
	}
	
	.el-carousel__item:nth-child(2n+1) {
		background-color: #d3dce6;
	}
&lt;/style&gt;

</code></pre><ul>
<li>其中key1是当前激活幻灯片的索引，key2是上一个激活幻灯片的索引</li>
<li>item是幻灯片的标志，与索引是减一的关系</li>
<li>其中那个最重要的是以下部分</li>
</ul>
<pre><code>    setTimeout(() =&gt; {
                this.key1 = key1
                this.key2 = key2
            }, 200)	
</code></pre><h2 id="postcss-plugin-px2rem插件和-flexible插件适配移动端">postcss-plugin-px2rem插件和 flexible插件适配移动端</h2>
<h3 id="安装">安装</h3>
<pre><code>npm i lib-flexible -S
npm i postcss-plugin-px2rem  --save -dev
</code></pre><h3 id="引入lib-flexible">引入lib-flexible</h3>
<ul>
<li><strong>flexible会动态给页面header中添加<code>&lt;meta name='viewport'&gt;</code>标签，所以务必请把目录 public/index.html 中的这个标签删除</strong></li>
<li>flexible会自动改变html的font-size的大小</li>
</ul>
<pre><code>import 'lib-flexible/flexible.js'
</code></pre><h3 id="修改lib-flexible源码">修改lib-flexible源码</h3>
<ul>
<li>因为lib-flexible主要用于手机自适应，当屏幕尺寸大于540px时，它设置html的font-size固定为54px，并不能根据屏幕尺寸调整<code>&lt;html&gt;</code>标签的font-size的大小，所以这里需要修改lib-flexible源码，<strong>如果只需要移动端适配则不需要修改</strong></li>
<li>在node-modules依赖包lib-flexible文件夹中的flexible.js文件中修改</li>
</ul>
<pre><code>function refreshRem(){
	//获取屏幕宽度
	var width = docEl.getBoundingClientRect().width;
	if (width / dpr &gt; 540) {
		//这里当屏幕宽度大于540时，宽度写死为540了，所以要想电脑端也能通过rem自适应,替换成 width = width * dpr;
		width = 540 * dpr; //修改替换成 width = width * dpr
	}
	var rem = width / 10;
	docEl.style.fontSize = rem + 'px';
	flexible.rem = win.rem = rem;
}
</code></pre><h3 id="使用postcss-plugin-px2rem">使用postcss-plugin-px2rem</h3>
<ul>
<li><strong>postcss-plugin-px2rem插件可以将px转换为rem</strong></li>
<li>在根目录新建vue.config.js,其配置如下</li>
</ul>
<pre><code>module.exports = {
  // webpack-dev-server 相关配置
  devServer: {
	open: true,  // npm run serve后自动打开页面
	host: '0.0.0.0',  // 匹配本机IP地址(默认是0.0.0.0)
	port: 8088, // 开发服务器运行端口号
	proxy: null,
	// 注：目前本项目暂时没有写后台接口，没有跨域问题，暂时不配置proxy
  },
	  
	  
    //px转rem的配置（postcss-plugin-px2rem插件）
    lintOnSave: true,
    css: {
        loaderOptions: {
            postcss: {
                plugins: [
                    require('postcss-plugin-px2rem')({
						rootValue: 54,   //54在width大于540px时可以与原网页保持一致
                        // rootValue: 100, //换算基数， 默认100  ，这样的话把根标签的字体规定为1rem为50px,这样就可以从设计稿上量出多少个px直接在代码中写多上px了。
                        // unitPrecision: 5, //允许REM单位增长到的十进制数字。
                        //propWhiteList: [],  //默认值是一个空数组，这意味着禁用白名单并启用所有属性。
                        // propBlackList: [], //黑名单
                        exclude: /(Login)/,  //默认false，可以（reg）利用正则表达式排除某些文件夹的方法，例如/(node_module)/ 。如果想把前端UI框架内的px也转换成rem，请把此属性设为默认值
                        // selectorBlackList: [], //要忽略并保留为px的选择器
                        // ignoreIdentifier: false,  //（boolean/string）忽略单个属性的方法，启用ignoreidentifier后，replace将自动设置为true。
                        // replace: true, // （布尔值）替换包含REM的规则，而不是添加回退。
                        mediaQuery: false,  //（布尔值）允许在媒体查询中转换px。
                        minPixelValue: 3 //设置要替换的最小像素值(3px会被转rem)。 默认 0
                    }),
                ]
            }
        }
    }


}
</code></pre><ul>
<li>如果个别地方不想转化px。可以简单的使用大写的 PX 或 Px</li>
<li>接下来接可以每一个页面慢慢适配了</li>
</ul>
<h2 id="vue-cli4打包部署tomcat">vue cli4打包部署tomcat</h2>
<h3 id="1在routerjs中的修改">1.在router.js中的修改</h3>
<pre><code>const router = new VueRouter({
  routes,
	mode: 'history',
	linkActiveClass: 'active',
	base: '/novel/'  //这里的路径是指部署到tomcat时index.html的路径
})
</code></pre><p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1gmt99pv4d1j30ws08bq3d.jpg" alt="QQ截图20210119195815.png">

</p>
<h3 id="2vueconfigjs的修改">2.vue.config.js的修改</h3>
<ul>
<li>根目录创建vue.config.js，修改内容如下</li>
</ul>
<pre><code>module.exports = {
  // 公共路径(必须有的)
  publicPath: process.env.NODE_ENV === 'production'
      ? '/novel/'
      : '/',
  // 输出文件目录
  outputDir: &quot;dist&quot;,
  // 静态资源存放的文件夹(相对于ouputDir)
  assetsDir: &quot;assets&quot;,
  // eslint-loader 是否在保存的时候检查(果断不用，这玩意儿我都没装)
  lintOnSave:false,
  // 我用的only，打包后小些
  runtimeCompiler: false,
  productionSourceMap: true, // 不需要生产环境的设置false可以减小dist文件大小，加速构建
}
</code></pre><ul>
<li>修改 publicPath: process.env.NODE_ENV === &ldquo;production&rdquo; ? &ldquo;/你在Tomcat新建的文件夹名称/&rdquo; : &ldquo;/&rdquo;</li>
<li><a href="https://cli.vuejs.org/zh/config/#publicpath">参考官方文档</a></li>
<li>npm run build打包即可</li>
</ul>
<h3 id="tomcat的配置">Tomcat的配置</h3>
<ul>
<li>将打包在dist中的内容放在webapps创建的目录中</li>
<li>此时就可以直接访问localhost:8080/novel，但是刷新就会404，所以需要进行以下配置</li>
<li>新建WEB-INF，然后复制conf中的web.xml到该目录下

  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1gmt9g6fd8aj30y806hdfz.jpg" alt="QQ截图20210119200808.png">

</li>
<li><strong>在web.xml中加入以下代码</strong></li>
</ul>
<pre><code>&lt;error-page&gt;
	&lt;error-code&gt;404&lt;/error-code&gt;
	&lt;location&gt;/index.html&lt;/location&gt;
&lt;/error-page&gt;
</code></pre><ul>
<li><strong>在web.xml中删除以下代码</strong></li>
</ul>
<pre><code>&lt;welcome-file-list&gt;
	&lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;
</code></pre><h2 id="vue项目部署后微博图床无法加载并报403的错误">vue项目部署后微博图床无法加载，并报403的错误</h2>
<ul>
<li>图床图片在请求微博图片时会检测request头部Referer字段的值，来鉴别请求来源，阿里云服务器上访问就会403</li>
<li>解决方法就是将Referer禁掉，例如可以在html文件中设置meta标签如下：</li>
</ul>
<pre><code>&lt;meta name=&quot;referrer&quot; content=&quot;never&quot;&gt;
</code></pre><h2 id="vue打包后与开发环境样式不一致">vue打包后与开发环境样式不一致</h2>
<ul>
<li>在main.js修改样式导入的顺序，如下，将App和router的导入放在ElementUI之后，开发环境就与打包后的网页一致</li>
</ul>
<pre><code>import Vue from 'vue'


import ElementUI from 'element-ui'
import 'element-ui/lib/theme-chalk/index.css'
Vue.use(ElementUI)
import animated from 'animate.css'
import 'element-ui/lib/theme-chalk/display.css';
import './assets/js/rem.js'
import 'lib-flexible/flexible.js'


import '@/assets/css/base.css'
import App from './App.vue'
import router from './router'
import store from './store'
</code></pre><ul>
<li>修改第三方组件的样式可以用如下方式</li>
</ul>
<pre><code>/deep/ .searchbox {
	position: absolute;
	flex: 3;
	/* top: 30px;
	right: 20px; */
}
</code></pre><h2 id="防止用户多次点击按钮重复提交">防止用户多次点击按钮重复提交</h2>
<ul>
<li><strong>添加自定义文件 preventReClick.js</strong></li>
</ul>
<pre><code>import Vue from 'vue'
 
const preventReClick = Vue.directive('preventReClick', {
    inserted: function (el, binding) {
        el.addEventListener('click', () =&gt; {
            if (!el.disabled) {
                el.disabled = true
                setTimeout(() =&gt; {
                    el.disabled = false
                }, binding.value || 3000)
            }
        })
    }
});
 
export { preventReClick }
</code></pre><ul>
<li><strong>在main.js中引用</strong></li>
</ul>
<pre><code>import preventReClick from './store/preventReClick' //防多次点击，重复提交
</code></pre><ul>
<li><strong>在按钮上添加v-preventReClick</strong></li>
</ul>
<pre><code>&lt;el-button class=&quot;common-button&quot; size=&quot;small&quot; type=&quot;primary&quot; @click=&quot;handleSave('form')&quot; v-preventReClick&gt;保存&lt;/el-button&gt;
</code></pre><h2 id="el-upload覆盖后的图片也会上传设置单文件上传">el-upload覆盖后的图片也会上传，设置单文件上传</h2>
<ul>
<li>
<p>使用limit属性设置最大上传数,但是该方法在实际使用中不满足需求，需要结合以下方法</p>
</li>
<li>
<p>element-ui上传组件（el-upload）单文件上传，单选文件 覆盖已有文件</p>
</li>
<li>
<p>单选文件上传，每次只允许一个文件上传，当已选择了文件再次点击选择其他的文件时，需要覆盖上次选择的文件。但是看了看el-upload的开发文档，好像不支持这个需求，选择新的文件后无法替代旧的。</p>
</li>
<li>
<p>利用el-upload的on-exceed，该方法是文件超出个数限制时的钩子，当把上传文件数最大设置为1的时候再次选择新文件时会触发这个方法，利用这个对文件进行重新赋值即可。</p>
</li>
<li>
<p>on-exceed的回调函数有两个参数function(files, fileList)，files为当前选择的文件，fileList已经选择后的文件（上次选择的），可以对fileList进行赋值来修改上传时的文件。但是只修改fileList是不够的，还需要修改el-upload里的uploadFiles，保持数据同步，不然上传后的回调函数里的字段会报错</p>
</li>
</ul>
<pre><code>&lt;el-upload
	class=&quot;avatar-uploader&quot;
	action=&quot;http://localhost:8888/updateImg&quot;
	ref=&quot;upload&quot;
	:data=&quot;param&quot;
	:auto-upload=&quot;false&quot;
	:show-file-list=&quot;false&quot;
	:on-change=&quot;changeFile&quot;
	:on-success=&quot;handle_success&quot;
	:on-error=&quot;handle_error&quot;
	:on-exceed=&quot;uploadExceed&quot; 
	:limit=&quot;1&quot;
	name=&quot;file&quot;
	&gt;



uploadExceed(files, fileList) {
	this.$set(fileList[0], 'raw', files[0]);
	this.$set(fileList[0], 'name', files[0].name);
	this.$refs['upload'].clearFiles();//清除文件
	this.$refs['upload'].handleStart(files[0]);//选择文件后的赋值方法
}
</code></pre><ul>
<li><a href="https://blog.csdn.net/lcy460692978/article/details/103072246">参考</a></li>
</ul>
<h2 id="axios实例使用axiosall">axios实例使用axios.all</h2>
<ul>
<li>axios.all是axios的静态方法，所以不能axios实例使用</li>
</ul>
<h2 id="axios的链式调用">axios的链式调用</h2>
<pre><code>new Promise((resolve,reject) =&gt; {
	//判断token是否过期
	request({
		url: '/verification',
		method: 'post'
	}).then(res =&gt; {
		if(res.status == 201){//token过期
			window.localStorage.clear()
			console.log(&quot;token过期&quot;)
			store.commit('updataUserName')
			this.$router.push('/login')
			return false
		}
		resolve(&quot;token未过期&quot;)
	})
	
}).then( resolve =&gt; { //上传除了图片的数据
			return request({
							url: '/uploadNovel',
							method: 'post',
							data: {
								novelName: this.ruleForm.name,
								novelAuthor: this.ruleForm.author,
								novelType: this.ruleForm.type,
								novelNum: this.ruleForm.wordNum,
								novelIntroduction: this.ruleForm.desc,
								novelNote: this.ruleForm.note
							}
						}).then(res =&gt; {
							if(res.status == 400){
								this.$notify.error({
									title: '上传失败',
									message: '该小说已被上传过了',
									offset: 100
								})
								return false
							}else if(res.status == 401){
								this.$notify.error({
									title: '上传失败',
									message: '请稍后重试',
									offset: 100
								})
								return false
							}else if(res.status == 200){
								this.$notify({
									title: '上传成功',
									type: 'success',
									offset: 100
								})	
							}
						})
}).then( resolve =&gt; {
	this.$refs.uploadNovelImg.$refs.uploadNovel.submit()
	// setTimeout(() =&gt; {
				
	// 		}, 500)
})
</code></pre><h2 id="thisparent无法获取到父组件的属性值">this.$parent无法获取到父组件的属性值</h2>
<ul>
<li>当使用框架时，this.$parent无法获取到想要的值，需要this.$parent.$parent然后根据得到的数据具体取出，如下</li>
</ul>
<pre><code>this.$parent.$parent.model.name
</code></pre><h2 id="vue项目刷新当前页面">vue项目刷新当前页面</h2>
<ul>
<li><a href="https://blog.csdn.net/qq_16772725/article/details/80467492?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control">方法</a></li>
</ul>
<h2 id="undefined1-get-httplocalhost8888undefined-404">undefined:1 GET http://localhost:8888/undefined 404</h2>
<ul>
<li>原因：子组件还没有收到父组件的数据就已经执行了created,此时得到的url就为undefined</li>
<li>只需要延时一下即可</li>
</ul>
<pre><code>&lt;script&gt;
	export default {
		name: 'recommendnovel',
		props: ['recommendItemData'],
		created() {
			setTimeout(() =&gt; {
				this.id = this.recommendItemData.novelId
				this.url = 'http://localhost:8888/' + this.recommendItemData.novelImg
				this.novelName = this.recommendItemData.novelName
				this.wordNumber = this.recommendItemData.novelNum
				this.type = this.recommendItemData.novelType
			},400)
		},
		data() {
			return {
				id: '1',
				url: '',
				novelName: '情与血',
				wordNumber: 145.67,
				type: '都市青春'
			}
		},
		methods: {
			toDetails() {
				this.$router.push({
					path: '/detail/'+this.id
				})
			}
		}
	}
</code></pre><h2 id="设置全局静态变量">设置全局静态变量</h2>
<ul>
<li>再main.js设置静态变量</li>
</ul>
<pre><code>Vue.prototype.defaultUrl = 'http://localhost:8888/'
</code></pre><ul>
<li>再需要的地方用this调用</li>
</ul>
<pre><code>this.defaultUrl
</code></pre><h2 id="路由复用问题">路由复用问题</h2>
<ul>
<li><a href="https://blog.csdn.net/qq_32615575/article/details/106194104">vue-router不同的路由共用一个组件component的问题</a></li>
</ul>
<h1 id="input输入文本换行显示问题">input输入文本换行显示问题</h1>
<ul>
<li>只需要在显示文本的标签加上以下样式</li>
</ul>
<pre><code>	white-space: pre-line;
</code></pre><h1 id="unshift添加数据渲染错误">unshift添加数据渲染错误</h1>
<ul>
<li>当发一个评论时，将评论的数据直接用unshift加入到数组中</li>
<li>原因:key绑定错误</li>
<li>原来的代码</li>
</ul>
<pre><code>&lt;commentItem v-for=&quot;(item,index) in commentData&quot; :key=&quot;index&quot; :commentItemData=&quot;item&quot;&gt;&lt;/commentItem&gt;
</code></pre><ul>
<li>修改后</li>
</ul>
<pre><code>&lt;commentItem v-for=&quot;item in commentData&quot; :key=&quot;item.commentId&quot; :commentItemData=&quot;item&quot;&gt;&lt;/commentItem&gt;
</code></pre><h1 id="keep-alive的使用">keep-alive的使用</h1>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/96740001">利用Vue中keep-alive，快速实现页面缓存</a></li>
<li><a href="https://blog.csdn.net/fu983531588/article/details/90321827">vue中keep-alive的使用及详解</a></li>
</ul>
<h2 id="鼠标悬停变小手">鼠标悬停变小手</h2>
<pre><code>
1.页面
&lt;el-col :span=&quot;16&quot;&gt;
  &lt;div class=&quot;information-title&quot;&gt;
    这是文字，鼠标可以悬停的文字
  &lt;/div&gt;
&lt;/el-col&gt;
2.css样式
.information-title {
  color: #19d3ea;
  font-size: 18px;
  cursor: pointer;  /*鼠标悬停变小手*/
  width: 100%;
}
</code></pre><h2 id="空格">空格</h2>
<pre><code>&lt;button class=&quot;registerButton&quot;&gt;注 册&lt;/button&gt;

.registerButton{
	word-spacing: 20px;
}
</code></pre>

                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/817nginx%E5%8E%9F%E7%90%86/" data-toggle="tooltip" data-placement="top" title="7、nginx原理(Nginx)">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/818shiro/" data-toggle="tooltip" data-placement="top" title="1、Shiro&#43;JWT(Shiro)">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>
                

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">标签</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/tags/activemq" title="activemq">
                            activemq
                        </a>
                        
                        
                        
                        <a href="/tags/ajax" title="ajax">
                            ajax
                        </a>
                        
                        
                        
                        <a href="/tags/cookie" title="cookie">
                            cookie
                        </a>
                        
                        
                        
                        <a href="/tags/datax" title="datax">
                            datax
                        </a>
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        <a href="/tags/filter" title="filter">
                            filter
                        </a>
                        
                        
                        
                        <a href="/tags/hadoop" title="hadoop">
                            hadoop
                        </a>
                        
                        
                        
                        <a href="/tags/hbase" title="hbase">
                            hbase
                        </a>
                        
                        
                        
                        <a href="/tags/hive" title="hive">
                            hive
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/java" title="java">
                            java
                        </a>
                        
                        
                        
                        <a href="/tags/javascript" title="javascript">
                            javascript
                        </a>
                        
                        
                        
                        <a href="/tags/javaweb" title="javaweb">
                            javaweb
                        </a>
                        
                        
                        
                        <a href="/tags/jdbc" title="jdbc">
                            jdbc
                        </a>
                        
                        
                        
                        <a href="/tags/jquery" title="jquery">
                            jquery
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/jsp" title="jsp">
                            jsp
                        </a>
                        
                        
                        
                        <a href="/tags/juc" title="juc">
                            juc
                        </a>
                        
                        
                        
                        <a href="/tags/jwt" title="jwt">
                            jwt
                        </a>
                        
                        
                        
                        <a href="/tags/kafka" title="kafka">
                            kafka
                        </a>
                        
                        
                        
                        <a href="/tags/linux" title="linux">
                            linux
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/maven" title="maven">
                            maven
                        </a>
                        
                        
                        
                        <a href="/tags/minio" title="minio">
                            minio
                        </a>
                        
                        
                        
                        <a href="/tags/mongodb" title="mongodb">
                            mongodb
                        </a>
                        
                        
                        
                        <a href="/tags/mybatis" title="mybatis">
                            mybatis
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/mysql" title="mysql">
                            mysql
                        </a>
                        
                        
                        
                        <a href="/tags/netty" title="netty">
                            netty
                        </a>
                        
                        
                        
                        <a href="/tags/nginx" title="nginx">
                            nginx
                        </a>
                        
                        
                        
                        <a href="/tags/react" title="react">
                            react
                        </a>
                        
                        
                        
                        <a href="/tags/redis" title="redis">
                            redis
                        </a>
                        
                        
                        
                        <a href="/tags/scala" title="scala">
                            scala
                        </a>
                        
                        
                        
                        <a href="/tags/servlet" title="servlet">
                            servlet
                        </a>
                        
                        
                        
                        <a href="/tags/session" title="session">
                            session
                        </a>
                        
                        
                        
                        <a href="/tags/shiro" title="shiro">
                            shiro
                        </a>
                        
                        
                        
                        <a href="/tags/spark" title="spark">
                            spark
                        </a>
                        
                        
                        
                        <a href="/tags/spring" title="spring">
                            spring
                        </a>
                        
                        
                        
                        <a href="/tags/springboot" title="springboot">
                            springboot
                        </a>
                        
                        
                        
                        <a href="/tags/springcloud" title="springcloud">
                            springcloud
                        </a>
                        
                        
                        
                        <a href="/tags/springmvc" title="springmvc">
                            springmvc
                        </a>
                        
                        
                        
                        <a href="/tags/springsecurity" title="springsecurity">
                            springsecurity
                        </a>
                        
                        
                        
                        <a href="/tags/tomcat" title="tomcat">
                            tomcat
                        </a>
                        
                        
                        
                        <a href="/tags/vue" title="vue">
                            vue
                        </a>
                        
                        
                        
                        <a href="/tags/xml" title="xml">
                            xml
                        </a>
                        
                        
                        
                        <a href="/tags/zookeeper" title="zookeeper">
                            zookeeper
                        </a>
                        
                        
                        
                        <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95" title="数据结构与算法">
                            数据结构与算法
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="设计模式">
                            设计模式
                        </a>
                        
                        
                        
                        <a href="/tags/%E9%A1%B9%E7%9B%AE" title="项目">
                            项目
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">                  
                    
                    <li>
                        <a href="mailto:1424197205@qq.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		           
                    
                    
                    
                    

		            
                    
                    <li>
                        <a target="_blank" href="/#">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-weixin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    <li>
                        <a target="_blank" href="https://github.com/yiguan1573">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
           
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="亿观的博客" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
            
             </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 亿观的博客 2022
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>





</body>
</html>
