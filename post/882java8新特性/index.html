<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="referrer" content="never">

    
    <meta property="og:site_name" content="亿观的博客">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://yiguan1573.github.io//img/01.jpg">
    <meta property="twitter:image" content="https://yiguan1573.github.io//img/01.jpg" />
    

    
    <meta name="title" content="2、Java8新特性（Java8）" />
    <meta property="og:title" content="2、Java8新特性（Java8）" />
    <meta property="twitter:title" content="2、Java8新特性（Java8）" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>2、Java8新特性（Java8） | yiguan1573</title>

    <link rel="canonical" href="/post/882java8%E6%96%B0%E7%89%B9%E6%80%A7/">

    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css" rel="stylesheet" type="text/css">

    
    

    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">亿观的博客</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">首页</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/%E5%AD%A6%E4%B9%A0">学习</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/archive/">档案</a></li>
                    
                        <li><a href="/top/about/">关于</a></li>
                    

                    
		    <li>
                        <a href="/search"><i class="fa fa-search"></i></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/03.JPG')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/java" title="java">
                            java
                        </a>
                        
                    </div>
                    <h1>2、Java8新特性（Java8）</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by 
                            
                                     &#34;亿观&#34;
                             
                            on 
                            Thursday, September 9, 2021
                            
                                <span id="/post/882java8%E6%96%B0%E7%89%B9%E6%80%A7/" class="leancloud_visitors meta_data_item" data-flag-title="">
    <span class="post-meta-item-icon">
      <span class="octicon octicon-eye"></span> 
    </span>
    <i class="fa fa-eye"></i>
    <span class="old-visitors-count" style="display: none;"></span>
    <span class="leancloud-visitors-count"></span>
</span>



<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>

<script>
	AV.initialize("", "");
</script>

<script type="text/javascript">
function showTime(Counter) {
    var query = new AV.Query(Counter);
    var entries = [];
    var $visitors = $(".leancloud_visitors");

    $visitors.each(function() {
        entries.push($(this).attr("id").trim());
    });

    query.containedIn('url', entries);
    query.find()
        .done(function(results) {
            var COUNT_CONTAINER_REF = '.leancloud-visitors-count';
            var OLD_COUNT_CONTAINER_REF = '.old-visitors-count';

            
            
            
            

            for (var i = 0; i < results.length; i++) {
                var item = results[i];
                var url = item.get('url');
                var time = item.get('time');
                var element = document.getElementById(url);

                $(element).find(COUNT_CONTAINER_REF).text(time);
            }
            for (var i = 0; i < entries.length; i++) {
                var url = entries[i];
                var element = document.getElementById(url);
                var countSpan = $(element).find(COUNT_CONTAINER_REF);
                if (countSpan.text() == '') {
                    var oldCountSpan = $(element).find(OLD_COUNT_CONTAINER_REF).text();
                    if(oldCountSpan!=''){
                        countSpan.text(0+parseInt(oldCountSpan));
                    }else{
                        countSpan.text(0);          
                    }
                }
            }
        })
        .fail(function(object, error) {
            console.log("Error: " + error.code + " " + error.message);
        });
}

function addCount(Counter) {
    var $visitors = $(".leancloud_visitors");
    var url = $visitors.attr('id').trim();
    var title = $visitors.attr('data-flag-title').trim();
    var query = new AV.Query(Counter);

    query.equalTo("url", url);
    query.find({
        success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment("time");
                counter.save(null, {
                    success: function(counter) {
                        var $element = $(document.getElementById(url));
                        $element.find('.leancloud-visitors-count').text(counter.get('time'));
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
                var newcounter = new Counter();
                 
                var acl = new AV.ACL();
                acl.setPublicReadAccess(true);
                acl.setPublicWriteAccess(true);
                newcounter.setACL(acl);
                 
                newcounter.set("title", title);
                newcounter.set("url", url);
                var OLD_COUNT_CONTAINER_REF = '.old-visitors-count';
                var $element = $(document.getElementById(url));
                var oldCountSpan = $element.find(OLD_COUNT_CONTAINER_REF).text();
                if(oldCountSpan!=''){
                    newcounter.set("time", parseInt(oldCountSpan)+1);
                }else{
 	                    newcounter.set("time",  1);
                }
                newcounter.save(null, {
                    success: function(newcounter) {
                        var $element = $(document.getElementById(url));
                        $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                    },
                    error: function(newcounter, error) {
                        console.log('Failed to create');
                    }
                });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + " " + error.message);
        }
    });
}
$(function() {
    var Counter = AV.Object.extend("Counter");
    
    
    if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
    } else {
        showTime(Counter);
    }
});
</script>

                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h2 id="概述">概述</h2>
<h3 id="生态">生态</h3>
<ul>
<li>Lambda 表达式</li>
<li>函数式接口</li>
<li>方法引用 / 构造器引用</li>
<li>Stream API</li>
<li>接口中的默认方法 / 静态方法</li>
<li>新时间日期 API</li>
<li>其他新特性</li>
</ul>
<h3 id="新特性">新特性</h3>
<ul>
<li>速度更快</li>
<li>代码更少</li>
<li>强大的 Stream API</li>
<li>便于并行</li>
<li>最大化减少空指针异常 Optional (Kotlin ?)</li>
</ul>
<h2 id="lambda">Lambda</h2>
<h3 id="匿名函数">匿名函数</h3>
<ul>
<li>Lambda是一个匿名函数，可以理解为一段可以传递的代码（将代码像数据一样传递）；可以写出更简洁、更灵活的代码；作为一种更紧凑的代码风格，是Java语言表达能力得到提升。</li>
<li>匿名内部类</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//匿名内部类
</span><span style="color:#6272a4"></span>    
    Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> comparator <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        @Override
        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">int</span> <span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>Integer o1<span style="color:#ff79c6">,</span> Integer o2<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> Integer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>o1<span style="color:#ff79c6">,</span>o2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>

        @Override
        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">boolean</span> <span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>Object obj<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">false</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span><span style="color:#ff79c6">;</span>
    <span style="color:#6272a4">//调用
</span><span style="color:#6272a4"></span>    
    TreeSet<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> set <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> TreeSet<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span>comparator<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="lambda-1">Lambda</h3>
<ul>
<li>事例</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">// Lambda 表达式
</span><span style="color:#6272a4"></span>    
    Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> comparator <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> Integer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    TreeSet<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> set <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> TreeSet<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span>comparator<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>演变过程</li>
</ul>
<pre><code>垃圾代码 --&gt; 策略模式 --&gt; 匿名内部类 --&gt; Lambda表达式
</code></pre><ul>
<li><strong>无参数，无返回值</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">Test02</span> <span style="color:#ff79c6">{</span>
	<span style="color:#8be9fd">int</span> num <span style="color:#ff79c6">=</span> 10<span style="color:#ff79c6">;</span> <span style="color:#6272a4">//jdk 1.7以前 必须final修饰
</span><span style="color:#6272a4"></span>    
    @Test
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        <span style="color:#6272a4">//匿名内部类
</span><span style="color:#6272a4"></span>        
        <span style="color:#ff79c6">new</span> Runnable<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            @Override
            <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">run</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                <span style="color:#6272a4">//在局部类中引用同级局部变量
</span><span style="color:#6272a4"></span>                
                <span style="color:#6272a4">//只读
</span><span style="color:#6272a4"></span>                
                System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Hello World&#34;</span> <span style="color:#ff79c6">+</span> num<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    @Test
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        <span style="color:#6272a4">//语法糖
</span><span style="color:#6272a4"></span>        
     	Runnable runnable <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span>
         	System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Hello Lambda&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
     	<span style="color:#ff79c6">}</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li><strong>有一个参数，无返回值</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Consumer<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> consumer <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    consumer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">accept</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;我觉得还行！&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li><strong>有一个参数，无返回值 （小括号可以省略不写）</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Consumer<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> consumer <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    consumer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">accept</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;我觉得还行！&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li><strong>有两个及以上的参数，有返回值，并且 Lambda 体中有多条语句</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> comparator <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;比较接口&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">return</span> Integer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li><strong>有两个及以上的参数，有返回值，并且 Lambda 体中只有1条语句 （大括号 与 return 都可以省略不写）</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> comparator <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> Integer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li><strong>Lambda 表达式 参数的数据类型可以省略不写 JVM可以自动进行类型推断</strong></li>
<li><strong>函数式接口</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@FunctionalInterface <span style="color:#6272a4">//该注解下的接口只能有一个抽象方法
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">interface</span> <span style="color:#50fa7b">MyFun</span> <span style="color:#ff79c6">{</span>

    Integer <span style="color:#50fa7b">count</span><span style="color:#ff79c6">(</span>Integer a<span style="color:#ff79c6">,</span> Integer b<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test05</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    MyFun myFun1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> a <span style="color:#ff79c6">+</span> b<span style="color:#ff79c6">;</span>
    MyFun myFun2 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> a <span style="color:#ff79c6">-</span> b<span style="color:#ff79c6">;</span>
    MyFun myFun3 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> a <span style="color:#ff79c6">*</span> b<span style="color:#ff79c6">;</span>
    MyFun myFun4 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> a <span style="color:#ff79c6">/</span> b<span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

<span style="color:#8be9fd;font-style:italic">public</span> Integer <span style="color:#50fa7b">operation</span><span style="color:#ff79c6">(</span>Integer a<span style="color:#ff79c6">,</span> Integer b<span style="color:#ff79c6">,</span> MyFun myFun<span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#ff79c6">return</span> myFun<span style="color:#ff79c6">.</span><span style="color:#50fa7b">count</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">,</span> b<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test06</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Integer result <span style="color:#ff79c6">=</span> operation<span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> 2<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">,</span> y<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> x <span style="color:#ff79c6">+</span> y<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>result<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="案例">案例</h3>
<ul>
<li>调用 Collections.sort() 方法，通过定制排序 比较两个 Employee (先按照年龄比，年龄相同按照姓名比)，使用 Lambda 表达式作为参数传递</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Data
@NoArgsConstructor
@AllArgsConstructor
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">Employee</span> <span style="color:#ff79c6">{</span>
    
    <span style="color:#8be9fd;font-style:italic">private</span> Integer id<span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> String name<span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> Integer age<span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> Double salary<span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

List<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> emps <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>101<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Z3&#34;</span><span style="color:#ff79c6">,</span> 19<span style="color:#ff79c6">,</span> 9999<span style="color:#ff79c6">.</span><span style="color:#50fa7b">99</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>102<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;L4&#34;</span><span style="color:#ff79c6">,</span> 20<span style="color:#ff79c6">,</span> 7777<span style="color:#ff79c6">.</span><span style="color:#50fa7b">77</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>103<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;W5&#34;</span><span style="color:#ff79c6">,</span> 35<span style="color:#ff79c6">,</span> 6666<span style="color:#ff79c6">.</span><span style="color:#50fa7b">66</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>104<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Tom&#34;</span><span style="color:#ff79c6">,</span> 44<span style="color:#ff79c6">,</span> 1111<span style="color:#ff79c6">.</span><span style="color:#50fa7b">11</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>105<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Jerry&#34;</span><span style="color:#ff79c6">,</span> 60<span style="color:#ff79c6">,</span> 4444<span style="color:#ff79c6">.</span><span style="color:#50fa7b">44</span><span style="color:#ff79c6">)</span>
<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Collections<span style="color:#ff79c6">.</span><span style="color:#50fa7b">sort</span><span style="color:#ff79c6">(</span>emps<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">,</span> e2<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">=</span><span style="color:#ff79c6">=</span> e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">compareTo</span><span style="color:#ff79c6">(</span>e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> Integer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span> e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>Employee emp <span style="color:#ff79c6">:</span> emps<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>emp<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h2 id="函数式接口">函数式接口</h2>
<ul>
<li><strong>Java内置四大核心函数式接口：</strong>
|  函数式接口   | 参数类型  |  返回类型   | 用途  |
|  :&mdash;-:  | :&mdash;-:  | :&mdash;-:  | :&mdash;-:  |
| Consumer消费型接口  | T | void  | 对类型为T的对象应用操作：void accept(T t) |
| Supplier提供型接口  | 无 | T  | 返回类型为T的对象：T get() |
| Function&lt;T, R&gt;函数型接口  | T | R  | 对类型为T的对象应用操作，并返回结果为R类型的对象：R apply(T t) |
| Predicate断言型接口  | T | boolean  | 确定类型为T的对象是否满足某约束，并返回boolean值：boolean test(T t) |</li>
</ul>
<h3 id="消费型接口">消费型接口</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//Consumer
</span><span style="color:#6272a4"></span>    
    Consumer<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> consumer <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;消费型接口&#34;</span> <span style="color:#ff79c6">+</span> x<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#6272a4">//test
</span><span style="color:#6272a4"></span>    
    consumer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">accept</span><span style="color:#ff79c6">(</span>100<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="提供型接口">提供型接口</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    List<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> integers <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span>2<span style="color:#ff79c6">,</span>3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span> 
    list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">addAll</span><span style="color:#ff79c6">(</span>integers<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#6272a4">//Supplier&lt;T&gt;
</span><span style="color:#6272a4"></span>    
    Supplier<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> supplier <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">int</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">(</span>Math<span style="color:#ff79c6">.</span><span style="color:#50fa7b">random</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">*</span> 10<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span>supplier<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>supplier<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>Integer integer <span style="color:#ff79c6">:</span> list<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>integer<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="函数型接口">函数型接口</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//Function&lt;T, R&gt;
</span><span style="color:#6272a4"></span>    
    String oldStr <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;abc123456xyz&#34;</span><span style="color:#ff79c6">;</span>
    Function<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">,</span> String<span style="color:#ff79c6">&gt;</span> function <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> s<span style="color:#ff79c6">.</span><span style="color:#50fa7b">substring</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> s<span style="color:#ff79c6">.</span><span style="color:#50fa7b">length</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">-</span>1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#6272a4">//test
</span><span style="color:#6272a4"></span>    
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>function<span style="color:#ff79c6">.</span><span style="color:#50fa7b">apply</span><span style="color:#ff79c6">(</span>oldStr<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="断言型接口">断言型接口</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//Predicate&lt;T&gt;
</span><span style="color:#6272a4"></span>    Integer age <span style="color:#ff79c6">=</span> 35<span style="color:#ff79c6">;</span>
    Predicate<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> predicate <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>i<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> i <span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">=</span> 35<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>predicate<span style="color:#ff79c6">.</span><span style="color:#50fa7b">test</span><span style="color:#ff79c6">(</span>age<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;你该退休了&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;我觉得还OK啦&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="其他接口">其他接口</h3>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guqwx2rwgnj60jo0ccjwg02.jpg" alt="QQ截图20210923220530.png">

</p>
<h2 id="引用">引用</h2>
<h3 id="方法引用">方法引用</h3>
<ul>
<li><strong>定义：若 Lambda 表达式体中的内容已有方法实现，则我们可以使用方法引用</strong></li>
<li><strong>语法格式</strong>
<ul>
<li>对象 :: 实例方法</li>
<li>类 :: 静态方法</li>
<li>类 :: 实例方法</li>
</ul>
</li>
<li><strong>对象 :: 实例方法</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    PrintStream ps <span style="color:#ff79c6">=</span> System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">;</span>
    Consumer<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> con1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> ps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    con1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">accept</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;aaa&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    Consumer<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> con2 <span style="color:#ff79c6">=</span> ps<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">;</span>
    con2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">accept</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;bbb&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
<span style="color:#6272a4">//注意：Lambda 表达实体中调用方法的参数列表、返回类型必须和函数式接口中抽象方法保持一致
</span></code></pre></div><ul>
<li><strong>类 :: 静态方法</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> com1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">,</span> y<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> Integer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">,</span> y<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>com1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> 2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    Comparator<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> com2 <span style="color:#ff79c6">=</span> Integer<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>compare<span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>com2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> 1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li><strong>类::实例方法</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    BiPredicate<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">,</span> String<span style="color:#ff79c6">&gt;</span> bp1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">,</span> y<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> x<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>y<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>bp1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">test</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">,</span><span style="color:#f1fa8c">&#34;b&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    BiPredicate<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">,</span> String<span style="color:#ff79c6">&gt;</span> bp2 <span style="color:#ff79c6">=</span> String<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>equals<span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>bp2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">test</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;c&#34;</span><span style="color:#ff79c6">,</span><span style="color:#f1fa8c">&#34;c&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

<span style="color:#6272a4">//条件：Lambda 参数列表中的第一个参数是方法的调用者，第二个参数是方法的参数时，才能使用 ClassName :: Method
</span></code></pre></div><h3 id="构造器引用">构造器引用</h3>
<ul>
<li><strong>ClassName :: new</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Supplier<span style="color:#ff79c6">&lt;</span>List<span style="color:#ff79c6">&gt;</span> sup1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    Supplier<span style="color:#ff79c6">&lt;</span>List<span style="color:#ff79c6">&gt;</span> sup2 <span style="color:#ff79c6">=</span> ArrayList<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">new</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="数组引用">数组引用</h3>
<ul>
<li><strong>Type :: new</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test07</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Function<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span>String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span><span style="color:#ff79c6">&gt;</span> fun <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">new</span> String<span style="color:#ff79c6">[</span>x<span style="color:#ff79c6">]</span><span style="color:#ff79c6">;</span>
    String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span> strs <span style="color:#ff79c6">=</span> fun<span style="color:#ff79c6">.</span><span style="color:#50fa7b">apply</span><span style="color:#ff79c6">(</span>10<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    Function<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span>String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span><span style="color:#ff79c6">&gt;</span> fun2 <span style="color:#ff79c6">=</span> String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">new</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h2 id="stream-api">Stream API</h2>
<h3 id="创建">创建</h3>
<ul>
<li>
<p>什么是 Stream?</p>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guqxi2dlm1j60jq0aygoc02.jpg" alt="QQ截图20210923222617.png">

</p>
</li>
<li>
<p>Stream的操作步骤</p>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guqxiq1nthj60jn0c476n02.jpg" alt="QQ截图20210923222655.png">

</p>
</li>
<li>
<p>创建流的几种方法如下</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#6272a4">/**
</span><span style="color:#6272a4">* 创建流
</span><span style="color:#6272a4">*/</span>
@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">/**
</span><span style="color:#6272a4">    * 集合流
</span><span style="color:#6272a4">    *  - Collection.stream() 串行流
</span><span style="color:#6272a4">    *  - Collection.parallelStream() 并行流
</span><span style="color:#6272a4">    */</span>
    List<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Stream<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> stream1 <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//数组流
</span><span style="color:#6272a4"></span>    
    <span style="color:#6272a4">//Arrays.stream(array)
</span><span style="color:#6272a4"></span>    
    String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span> strings <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> String<span style="color:#ff79c6">[</span>10<span style="color:#ff79c6">]</span><span style="color:#ff79c6">;</span>
    Stream<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> stream2 <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span>strings<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//Stream 静态方法
</span><span style="color:#6272a4"></span>    
    <span style="color:#6272a4">//Stream.of(...)
</span><span style="color:#6272a4"></span>    
    Stream<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> stream3 <span style="color:#ff79c6">=</span> Stream<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> 2<span style="color:#ff79c6">,</span> 3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//无限流
</span><span style="color:#6272a4"></span>    
    <span style="color:#6272a4">//迭代
</span><span style="color:#6272a4"></span>    
    Stream<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> stream4 <span style="color:#ff79c6">=</span> Stream<span style="color:#ff79c6">.</span><span style="color:#50fa7b">iterate</span><span style="color:#ff79c6">(</span>0<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">(</span>i<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span>i<span style="color:#ff79c6">+</span>i<span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    stream4<span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//生成
</span><span style="color:#6272a4"></span>    
    Stream<span style="color:#ff79c6">.</span><span style="color:#50fa7b">generate</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> Math<span style="color:#ff79c6">.</span><span style="color:#50fa7b">random</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">limit</span><span style="color:#ff79c6">(</span>5<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="筛选--切片">筛选 / 切片</h3>
<ul>
<li>filter：接收 Lambda ，从流中排除某些元素</li>
<li>limit：截断流，使其元素不超过给定数量</li>
<li>skip(n)：跳过元素，返回一个舍弃了前n个元素的流；若流中元素不足n个，则返回一个空流；与 limit(n) 互补</li>
<li>distinct：筛选，通过流所生成的 hashCode() 与 equals() 取除重复元素</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">List<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> emps <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>101<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Z3&#34;</span><span style="color:#ff79c6">,</span> 19<span style="color:#ff79c6">,</span> 9999<span style="color:#ff79c6">.</span><span style="color:#50fa7b">99</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>102<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;L4&#34;</span><span style="color:#ff79c6">,</span> 20<span style="color:#ff79c6">,</span> 7777<span style="color:#ff79c6">.</span><span style="color:#50fa7b">77</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>103<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;W5&#34;</span><span style="color:#ff79c6">,</span> 35<span style="color:#ff79c6">,</span> 6666<span style="color:#ff79c6">.</span><span style="color:#50fa7b">66</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>104<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Tom&#34;</span><span style="color:#ff79c6">,</span> 44<span style="color:#ff79c6">,</span> 1111<span style="color:#ff79c6">.</span><span style="color:#50fa7b">11</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>105<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Jerry&#34;</span><span style="color:#ff79c6">,</span> 60<span style="color:#ff79c6">,</span> 4444<span style="color:#ff79c6">.</span><span style="color:#50fa7b">44</span><span style="color:#ff79c6">)</span>
<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">filter</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> x<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">&gt;</span> 35<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">limit</span><span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">)</span> <span style="color:#6272a4">//短路？达到满足不再内部迭代
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">distinct</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">skip</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>
<p><strong>Stream的中间操作</strong></p>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guqxo5o6nmj60jv0crq8j02.jpg" alt="QQ截图20210923223207.png">

</p>
</li>
<li>
<p>内部迭代：迭代操作由 Stream API 完成</p>
</li>
<li>
<p>外部迭代：我们通过迭代器完成</p>
</li>
</ul>
<h3 id="映射">映射</h3>
<ul>
<li>map：接收 Lambda ，将元素转换为其他形式或提取信息；接受一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;b&#34;</span><span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;c&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>str<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> str<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toUpperCase</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>flatMap：接收一个函数作为参数，将流中每一个值都换成另一个流，然后把所有流重新连接成一个流</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> Stream<span style="color:#ff79c6">&lt;</span>Character<span style="color:#ff79c6">&gt;</span> <span style="color:#50fa7b">filterCharacter</span><span style="color:#ff79c6">(</span>String str<span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>Character<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">char</span> c <span style="color:#ff79c6">:</span> str<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toCharArray</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span>c<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#ff79c6">return</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;b&#34;</span><span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;c&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Test02 test02 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Test02<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">flatMap</span><span style="color:#ff79c6">(</span>test02<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>filterCharacter<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="排序">排序</h3>
<ul>
<li>sorted()：自然排序</li>
<li>sorted(Comparator c)：定制排序</li>
</ul>
<p>Comparable：自然排序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span>2<span style="color:#ff79c6">,</span>3<span style="color:#ff79c6">,</span>4<span style="color:#ff79c6">,</span>5<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">sorted</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> 
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><p>Comparator：定制排序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test05</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">sorted</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">,</span> e2<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span> 
            <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
                <span style="color:#ff79c6">return</span> e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">compareTo</span><span style="color:#ff79c6">(</span>e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
                <span style="color:#ff79c6">return</span> e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">compareTo</span><span style="color:#ff79c6">(</span>e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="查找--匹配">查找 / 匹配</h3>
<ul>
<li><strong>终止操作：</strong>
<ul>
<li>allMatch：检查是否匹配所有元素</li>
<li>anyMatch：检查是否至少匹配一个元素</li>
<li>noneMatch：检查是否没有匹配所有元素</li>
<li>findFirst：返回第一个元素</li>
<li>findAny：返回当前流中的任意元素</li>
<li>count：返回流中元素的总个数</li>
<li>max：返回流中最大值</li>
<li>min：返回流中最小值</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">enum</span> Status <span style="color:#ff79c6">{</span>
    FREE<span style="color:#ff79c6">,</span> BUSY<span style="color:#ff79c6">,</span> VOCATION<span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>Status<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">FREE</span><span style="color:#ff79c6">,</span> Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">BUSY</span><span style="color:#ff79c6">,</span> Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">VOCATION</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd">boolean</span> flag1 <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">allMatch</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> s<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">BUSY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>flag1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd">boolean</span> flag2 <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">anyMatch</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> s<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">BUSY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>flag2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd">boolean</span> flag3 <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">noneMatch</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> s<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">BUSY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>flag3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">// 避免空指针异常,如果Optional为空 找一个替代的对象
</span><span style="color:#6272a4"></span>    
    Optional<span style="color:#ff79c6">&lt;</span>Status<span style="color:#ff79c6">&gt;</span> op1 <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">findFirst</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Status s1 <span style="color:#ff79c6">=</span> op1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">orElse</span><span style="color:#ff79c6">(</span>Status<span style="color:#ff79c6">.</span><span style="color:#50fa7b">BUSY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>s1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    Optional<span style="color:#ff79c6">&lt;</span>Status<span style="color:#ff79c6">&gt;</span> op2 <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">findAny</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>op2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd">long</span> count <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">count</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>count<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    
    Optional<span style="color:#ff79c6">&lt;</span>Status<span style="color:#ff79c6">&gt;</span> op3 <span style="color:#ff79c6">=</span> employee<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">max</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">,</span>e2<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> Double<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSalary</span><span style="color:#ff79c6">,</span>e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSalary</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>op3<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    
    Optional<span style="color:#ff79c6">&lt;</span>Status<span style="color:#ff79c6">&gt;</span> op4 <span style="color:#ff79c6">=</span> employee<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getSalary<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">max</span><span style="color:#ff79c6">(</span>Double<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>compare<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>op4<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="归约--收集">归约 / 收集</h3>
<ul>
<li>归约：reduce(T identity, BinaryOperator) / reduce(BinaryOperator) 可以将流中的数据反复结合起来，得到一个值</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#6272a4">/**
</span><span style="color:#6272a4">* Java：
</span><span style="color:#6272a4">*  - reduce：需提供默认值（初始值）
</span><span style="color:#6272a4">* Kotlin：
</span><span style="color:#6272a4">*  - fold：不需要默认值（初始值）
</span><span style="color:#6272a4">*  - reduce：需提供默认值（初始值）
</span><span style="color:#6272a4">*/</span>
@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    List<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> 2<span style="color:#ff79c6">,</span> 3<span style="color:#ff79c6">,</span> 4<span style="color:#ff79c6">,</span> 5<span style="color:#ff79c6">,</span> 6<span style="color:#ff79c6">,</span> 7<span style="color:#ff79c6">,</span> 8<span style="color:#ff79c6">,</span> 9<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Integer integer <span style="color:#ff79c6">=</span> list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">reduce</span><span style="color:#ff79c6">(</span>0<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">,</span> y<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> x <span style="color:#ff79c6">+</span> y<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>integer<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>收集：collect 将流转换成其他形式；接收一个 Collector 接口的实现，用于给流中元素做汇总的方法
<ul>
<li>Collector接口中方法的实现决定了如何对流执行收集操作(如收集到List、Set、Map)。但是 Collectors实用类提供了很多静态方法，可以方便地创建常见收集器实例</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">List<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> emps <span style="color:#ff79c6">=</span> Arrays<span style="color:#ff79c6">.</span><span style="color:#50fa7b">asList</span><span style="color:#ff79c6">(</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>101<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Z3&#34;</span><span style="color:#ff79c6">,</span> 19<span style="color:#ff79c6">,</span> 9999<span style="color:#ff79c6">.</span><span style="color:#50fa7b">99</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>102<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;L4&#34;</span><span style="color:#ff79c6">,</span> 20<span style="color:#ff79c6">,</span> 7777<span style="color:#ff79c6">.</span><span style="color:#50fa7b">77</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>103<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;W5&#34;</span><span style="color:#ff79c6">,</span> 35<span style="color:#ff79c6">,</span> 6666<span style="color:#ff79c6">.</span><span style="color:#50fa7b">66</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>104<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Tom&#34;</span><span style="color:#ff79c6">,</span> 44<span style="color:#ff79c6">,</span> 1111<span style="color:#ff79c6">.</span><span style="color:#50fa7b">11</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
    <span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span>105<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;Jerry&#34;</span><span style="color:#ff79c6">,</span> 60<span style="color:#ff79c6">,</span> 4444<span style="color:#ff79c6">.</span><span style="color:#50fa7b">44</span><span style="color:#ff79c6">)</span>
<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//放入List
</span><span style="color:#6272a4"></span>    
    List<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getName<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toList</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span> 
    list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    
	<span style="color:#6272a4">//放入Set
</span><span style="color:#6272a4"></span>    
    Set<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> set <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getName<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toSet</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    set<span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//放入LinkedHashSet
</span><span style="color:#6272a4"></span>    
    LinkedHashSet<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> linkedHashSet <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getName<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toCollection</span><span style="color:#ff79c6">(</span>LinkedHashSet<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">new</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    linkedHashSet<span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//总数
</span><span style="color:#6272a4"></span>    
    Long count <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">counting</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>count<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//平均值
</span><span style="color:#6272a4"></span>    
    Double avg <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">averagingDouble</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getSalary<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>avg<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//总和
</span><span style="color:#6272a4"></span>    
    Double sum <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">summingDouble</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getSalary<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>sum<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//最大值
</span><span style="color:#6272a4"></span>    
    Optional<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> max <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">maxBy</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">,</span> e2<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> Double<span style="color:#ff79c6">.</span><span style="color:#50fa7b">compare</span><span style="color:#ff79c6">(</span>e1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSalary</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span> e2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSalary</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>max<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//最小值
</span><span style="color:#6272a4"></span>    
    Optional<span style="color:#ff79c6">&lt;</span>Double<span style="color:#ff79c6">&gt;</span> min <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getSalary<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">minBy</span><span style="color:#ff79c6">(</span>Double<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>compare<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>min<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//分组
</span><span style="color:#6272a4"></span>    
    Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> List<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span> map <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">groupingBy</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getId<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//多级分组
</span><span style="color:#6272a4"></span>    
    Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> Map<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">,</span> List<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span> mapMap <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">groupingBy</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getId<span style="color:#ff79c6">,</span> Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">groupingBy</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">&gt;</span> 35<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;开除&#34;</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
                <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;继续加班&#34;</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>mapMap<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    
    <span style="color:#6272a4">//分区
</span><span style="color:#6272a4"></span>    
    Map<span style="color:#ff79c6">&lt;</span>Boolean<span style="color:#ff79c6">,</span> List<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span> listMap <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">partitioningBy</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSalary</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">&gt;</span> 4321<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>listMap<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test05</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//总结
</span><span style="color:#6272a4"></span>    
    DoubleSummaryStatistics dss <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">summarizingDouble</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getSalary<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dss<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getMax</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dss<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getMin</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dss<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSum</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dss<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getCount</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dss<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAverage</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    
    <span style="color:#6272a4">//连接
</span><span style="color:#6272a4"></span>    
    String str <span style="color:#ff79c6">=</span> emps<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">map</span><span style="color:#ff79c6">(</span>Employee<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>getName<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">collect</span><span style="color:#ff79c6">(</span>Collectors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">joining</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;-&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span> <span style="color:#6272a4">//可传入分隔符
</span><span style="color:#6272a4"></span>    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>str<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="并行流">并行流</h3>
<ul>
<li>并行流：就是把一个内容分成几个数据块，并用不同的线程分别处理每个数据块的流</li>
<li>Java 8 中将并行进行了优化，我们可以很容易的对数据进行操作；Stream API 可以声明性地通过 parallel() 与 sequential() 在并行流与串行流之间切换</li>
<li>Fork / Join 框架：</li>
</ul>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guqycmzty3j60ju0dl42602.jpg" alt="QQ截图20210923225539.png">

</p>
<ul>
<li>Fork / Join 框架与传统线程池的区别：</li>
</ul>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guqyd5cx4dj60ji0aq78k02.jpg" alt="QQ截图20210923225609.png">

</p>
<ul>
<li>Fork / Join 实现：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">ForkJoinCalculate</span> <span style="color:#8be9fd;font-style:italic">extends</span> RecursiveTask<span style="color:#ff79c6">&lt;</span>Long<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span>

    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> <span style="color:#8be9fd">long</span> serialVersionUID <span style="color:#ff79c6">=</span> 1234567890L<span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">long</span> start<span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">long</span> end<span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> <span style="color:#8be9fd">long</span> THRESHPLD <span style="color:#ff79c6">=</span> 10000<span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">ForkJoinCalculate</span><span style="color:#ff79c6">(</span><span style="color:#8be9fd">long</span> start<span style="color:#ff79c6">,</span> <span style="color:#8be9fd">long</span> end<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">start</span> <span style="color:#ff79c6">=</span> start<span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">end</span> <span style="color:#ff79c6">=</span> end<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    @Override
    <span style="color:#8be9fd;font-style:italic">protected</span> Long <span style="color:#50fa7b">compute</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#8be9fd">long</span> length <span style="color:#ff79c6">=</span> end <span style="color:#ff79c6">-</span> start<span style="color:#ff79c6">;</span>

        <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>length <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">=</span> THRESHPLD<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#8be9fd">long</span> sum <span style="color:#ff79c6">=</span> 0<span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">long</span> i <span style="color:#ff79c6">=</span> start<span style="color:#ff79c6">;</span> i <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">=</span> end<span style="color:#ff79c6">;</span> i<span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                sum <span style="color:#ff79c6">+</span><span style="color:#ff79c6">=</span> i<span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
            <span style="color:#8be9fd">long</span> middle <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>start <span style="color:#ff79c6">+</span> end<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">/</span> 2<span style="color:#ff79c6">;</span>

            ForkJoinCalculate left <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ForkJoinCalculate<span style="color:#ff79c6">(</span>start<span style="color:#ff79c6">,</span> end<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            left<span style="color:#ff79c6">.</span><span style="color:#50fa7b">fork</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span> <span style="color:#6272a4">//拆分子任务 压入线程队列
</span><span style="color:#6272a4"></span>
            ForkJoinCalculate right <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ForkJoinCalculate<span style="color:#ff79c6">(</span>middle <span style="color:#ff79c6">+</span> 1<span style="color:#ff79c6">,</span> end<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            right<span style="color:#ff79c6">.</span><span style="color:#50fa7b">fork</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

            <span style="color:#ff79c6">return</span> left<span style="color:#ff79c6">.</span><span style="color:#50fa7b">join</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">+</span> right<span style="color:#ff79c6">.</span><span style="color:#50fa7b">join</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>

        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">null</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>

<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">TestForkJoin</span> <span style="color:#ff79c6">{</span>

    <span style="color:#6272a4">/**
</span><span style="color:#6272a4">     * ForkJoin 框架
</span><span style="color:#6272a4">     */</span>
    @Test
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        Instant start <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

        ForkJoinPool pool <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ForkJoinPool<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        ForkJoinCalculate task <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ForkJoinCalculate<span style="color:#ff79c6">(</span>0<span style="color:#ff79c6">,</span> 100000000L<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

        Long sum <span style="color:#ff79c6">=</span> pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">invoke</span><span style="color:#ff79c6">(</span>task<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>sum<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

        Instant end <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>Duration<span style="color:#ff79c6">.</span><span style="color:#50fa7b">between</span><span style="color:#ff79c6">(</span>start<span style="color:#ff79c6">,</span> end<span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">getNano</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#6272a4">/**
</span><span style="color:#6272a4">     * 普通 for循环
</span><span style="color:#6272a4">     */</span>
    @Test
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        Instant start <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

        Long sum <span style="color:#ff79c6">=</span> 0L<span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">long</span> i <span style="color:#ff79c6">=</span> 0<span style="color:#ff79c6">;</span> i <span style="color:#ff79c6">&lt;</span> 100000000L<span style="color:#ff79c6">;</span> i<span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            sum <span style="color:#ff79c6">+</span><span style="color:#ff79c6">=</span> i<span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>

        Instant end <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>Duration<span style="color:#ff79c6">.</span><span style="color:#50fa7b">between</span><span style="color:#ff79c6">(</span>start<span style="color:#ff79c6">,</span> end<span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">getNano</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>Java 8 并行流 / 串行流：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//串行流(单线程)：切换为并行流 parallel()
</span><span style="color:#6272a4"></span>    
    <span style="color:#6272a4">//并行流：切换为串行流 sequential()
</span><span style="color:#6272a4"></span>    
    LongStream<span style="color:#ff79c6">.</span><span style="color:#50fa7b">rangeClosed</span><span style="color:#ff79c6">(</span>0<span style="color:#ff79c6">,</span> 100000000L<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">parallel</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#6272a4">//底层：ForkJoin
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">.</span><span style="color:#50fa7b">reduce</span><span style="color:#ff79c6">(</span>0<span style="color:#ff79c6">,</span> Long<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>sum<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>parallelStream执行效率要比传统的for循环和stream要快的多，使用其需要考虑以下因素：
<ul>
<li>是否需要并行</li>
<li>任务之间是否是独立的，是否会引起任何竞态条件</li>
<li>结果是否取决于任务的调用顺序</li>
</ul>
</li>
</ul>
<h2 id="optional">Optional</h2>
<ul>
<li><strong>定义：Optional 类 (java.util.Optional) 是一个容器类，代表一个值存在或不存在，原来用 null 表示一个值不存在，现在用 Optional 可以更好的表达这个概念；并且可以避免空指针异常。</strong></li>
<li><strong>常用方法：</strong>
<ul>
<li>Optional.of(T t)：创建一个 Optional 实例</li>
<li>Optional.empty(T t)：创建一个空的 Optional 实例</li>
<li>Optional.ofNullable(T t)：若 t 不为 null，创建 Optional 实例，否则空实例</li>
<li>isPresent()：判断是否包含某值</li>
<li>orElse(T t)：如果调用对象包含值，返回该值，否则返回 t</li>
<li>orElseGet(Supplier s)：如果调用对象包含值，返回该值，否则返回 s 获取的值</li>
<li>map(Function f)：如果有值对其处理，并返回处理后的 Optional，否则返回 Optional.empty()</li>
<li>flatmap(Function mapper)：与 map 相似，要求返回值必须是 Optional</li>
</ul>
</li>
<li>Optional.of(T t)：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Optional<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> op <span style="color:#ff79c6">=</span> Optional<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Employee employee <span style="color:#ff79c6">=</span> op<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>Optional.empty(T t)：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Optional<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> op <span style="color:#ff79c6">=</span> Optional<span style="color:#ff79c6">.</span><span style="color:#50fa7b">empty</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Employee employee <span style="color:#ff79c6">=</span> op<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>Optional.ofNullable(T t)：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Optional<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> op <span style="color:#ff79c6">=</span> Optional<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ofNullable</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Employee employee <span style="color:#ff79c6">=</span> op<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>isPresent()：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Optional<span style="color:#ff79c6">&lt;</span>Employee<span style="color:#ff79c6">&gt;</span> op <span style="color:#ff79c6">=</span> Optional<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ofNullable</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> Employee<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>op<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isPresent</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        Employee employee <span style="color:#ff79c6">=</span> op<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h2 id="接口">接口</h2>
<h3 id="默认方法">默认方法</h3>
<ul>
<li>类优先原则：</li>
</ul>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guwqvkfng3j30jh09aadi.jpg" alt="QQ截图20210928231030.png">

</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">interface</span> <span style="color:#50fa7b">MyFun</span> <span style="color:#ff79c6">{</span>

    <span style="color:#ff79c6">default</span> String <span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;libo&#34;</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#ff79c6">default</span> Integer <span style="color:#50fa7b">getAge</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> 22<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>

<span style="color:#6272a4">//接口冲突
</span><span style="color:#6272a4"></span>
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">SubClass</span> <span style="color:#8be9fd;font-style:italic">implements</span> MyFun<span style="color:#ff79c6">,</span>MyInterface<span style="color:#ff79c6">{</span>
    <span style="color:#8be9fd;font-style:italic">public</span> String <span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> MyFun<span style="color:#ff79c6">.</span><span style="color:#50fa7b">super</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">getName</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="静态方法">静态方法</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">interface</span> <span style="color:#50fa7b">MyFun</span> <span style="color:#ff79c6">{</span>

    <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">getAddr</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;addr&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#8be9fd;font-style:italic">static</span> String <span style="color:#50fa7b">Hello</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;Hello World&#34;</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h2 id="date--time-api">Date / Time API</h2>
<h3 id="安全问题">安全问题</h3>
<ul>
<li>传统的日期格式化：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    SimpleDateFormat sdf <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> SimpleDateFormat<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    Callable<span style="color:#ff79c6">&lt;</span>Date<span style="color:#ff79c6">&gt;</span> task <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> sdf<span style="color:#ff79c6">.</span><span style="color:#50fa7b">parse</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;20200517&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    ExecutorService pool <span style="color:#ff79c6">=</span> Executors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">newFixedThreadPool</span><span style="color:#ff79c6">(</span>10<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    ArrayList<span style="color:#ff79c6">&lt;</span>Future<span style="color:#ff79c6">&lt;</span>Date<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span> result <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">int</span> i <span style="color:#ff79c6">=</span> 0<span style="color:#ff79c6">;</span> i <span style="color:#ff79c6">&lt;</span> 10<span style="color:#ff79c6">;</span> i<span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        result<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span>pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">submit</span><span style="color:#ff79c6">(</span>task<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>Future<span style="color:#ff79c6">&lt;</span>Date<span style="color:#ff79c6">&gt;</span> future <span style="color:#ff79c6">:</span> result<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">try</span> <span style="color:#ff79c6">{</span>
            System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>future<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">catch</span> <span style="color:#ff79c6">(</span>InterruptedException <span style="color:#ff79c6">|</span> ExecutionException e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">printStackTrace</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
    
    pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">shutdown</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
<span style="color:#6272a4">//运行异常
</span></code></pre></div><ul>
<li>加锁</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DateFormatThreadLocal</span> <span style="color:#ff79c6">{</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> ThreadLocal<span style="color:#ff79c6">&lt;</span>DateFormat<span style="color:#ff79c6">&gt;</span> df <span style="color:#ff79c6">=</span> ThreadLocal<span style="color:#ff79c6">.</span><span style="color:#50fa7b">withInitial</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">new</span> SimpleDateFormat<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> Date <span style="color:#50fa7b">convert</span><span style="color:#ff79c6">(</span>String source<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">throws</span> ParseException<span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> df<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">parse</span><span style="color:#ff79c6">(</span>source<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    Callable<span style="color:#ff79c6">&lt;</span>Date<span style="color:#ff79c6">&gt;</span> task <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> DateFormatThreadLocal<span style="color:#ff79c6">.</span><span style="color:#50fa7b">convert</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;20200517&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    ExecutorService pool <span style="color:#ff79c6">=</span> Executors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">newFixedThreadPool</span><span style="color:#ff79c6">(</span>10<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    ArrayList<span style="color:#ff79c6">&lt;</span>Future<span style="color:#ff79c6">&lt;</span>Date<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span> result <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">int</span> i <span style="color:#ff79c6">=</span> 0<span style="color:#ff79c6">;</span> i <span style="color:#ff79c6">&lt;</span> 10<span style="color:#ff79c6">;</span> i<span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        result<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span>pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">submit</span><span style="color:#ff79c6">(</span>task<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>Future<span style="color:#ff79c6">&lt;</span>Date<span style="color:#ff79c6">&gt;</span> future <span style="color:#ff79c6">:</span> result<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">try</span> <span style="color:#ff79c6">{</span>
            System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>future<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">catch</span> <span style="color:#ff79c6">(</span>InterruptedException <span style="color:#ff79c6">|</span> ExecutionException e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">printStackTrace</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>

    pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">shutdown</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>DateTimeFormatter：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    DateTimeFormatter dtf <span style="color:#ff79c6">=</span> DateTimeFormatter<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ISO_LOCAL_DATE</span><span style="color:#ff79c6">;</span>

    Callable<span style="color:#ff79c6">&lt;</span>LocalDate<span style="color:#ff79c6">&gt;</span> task <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> LocalDate<span style="color:#ff79c6">.</span><span style="color:#50fa7b">parse</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;20200517&#34;</span><span style="color:#ff79c6">,</span>dtf<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    ExecutorService pool <span style="color:#ff79c6">=</span> Executors<span style="color:#ff79c6">.</span><span style="color:#50fa7b">newFixedThreadPool</span><span style="color:#ff79c6">(</span>10<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    ArrayList<span style="color:#ff79c6">&lt;</span>Future<span style="color:#ff79c6">&lt;</span>LocalDate<span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">&gt;</span> result <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span><span style="color:#8be9fd">int</span> i <span style="color:#ff79c6">=</span> 0<span style="color:#ff79c6">;</span> i <span style="color:#ff79c6">&lt;</span> 10<span style="color:#ff79c6">;</span> i<span style="color:#ff79c6">+</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        result<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span>pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">submit</span><span style="color:#ff79c6">(</span>task<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>Future<span style="color:#ff79c6">&lt;</span>LocalDate<span style="color:#ff79c6">&gt;</span> future <span style="color:#ff79c6">:</span> result<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">try</span> <span style="color:#ff79c6">{</span>
            System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>future<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">catch</span> <span style="color:#ff79c6">(</span>InterruptedException <span style="color:#ff79c6">|</span> ExecutionException e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">printStackTrace</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>

    pool<span style="color:#ff79c6">.</span><span style="color:#50fa7b">shutdown</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h2 id="本地时间--日期">本地时间 / 日期</h2>
<ul>
<li>ISO 标准：</li>
</ul>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guwr3rzec1j60jo0cvq6m02.jpg" alt="QQ截图20210928231825.png">

</p>
<ul>
<li>常用方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">方法名</th>
<th align="center">返回值类型</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">now( )</td>
<td align="center">static LocalDateTime</td>
<td align="center">从默认时区的系统时钟获取当前日期</td>
</tr>
<tr>
<td align="center">of(int year, int month, int dayOfMonth, int hour, int minute, int second)</td>
<td align="center">static LocalDateTime</td>
<td align="center">从年，月，日，小时，分钟和秒获得 LocalDateTime的实例，将纳秒设置为零</td>
</tr>
<tr>
<td align="center">plus(long amountToAdd, TemporalUnit unit)</td>
<td align="center">LocalDateTime</td>
<td align="center">返回此日期时间的副本，并添加指定的数量</td>
</tr>
<tr>
<td align="center">get(TemporalField field)</td>
<td align="center">int</td>
<td align="center">从此日期时间获取指定字段的值为 int</td>
</tr>
</tbody>
</table>
<ul>
<li>测试</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//获取当前时间日期 now
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt1 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//指定时间日期 of
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt2 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span>2020<span style="color:#ff79c6">,</span> 05<span style="color:#ff79c6">,</span> 17<span style="color:#ff79c6">,</span> 16<span style="color:#ff79c6">,</span> 24<span style="color:#ff79c6">,</span> 33<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//加 plus
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt3 <span style="color:#ff79c6">=</span> ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">plusYears</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//减 minus
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt4 <span style="color:#ff79c6">=</span> ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">minusMonths</span><span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt4<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//获取指定的你年月日时分秒... get
</span><span style="color:#6272a4"></span>    
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getDayOfYear</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getHour</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSecond</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="时间戳">时间戳</h3>
<ul>
<li>Instant：以 Unix 元年 1970-01-01 00:00:00 到某个时间之间的毫秒值</li>
<li>测试</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">// 默认获取 UTC 时区 (UTC：世界协调时间)
</span><span style="color:#6272a4"></span>    
    Instant ins1 <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ins1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//带偏移量的时间日期 (如：UTC + 8)
</span><span style="color:#6272a4"></span>    
    OffsetDateTime odt1 <span style="color:#ff79c6">=</span> ins1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">atOffset</span><span style="color:#ff79c6">(</span>ZoneOffset<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ofHours</span><span style="color:#ff79c6">(</span>8<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>odt1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//转换成对应的毫秒值
</span><span style="color:#6272a4"></span>    
    <span style="color:#8be9fd">long</span> milli1 <span style="color:#ff79c6">=</span> ins1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toEpochMilli</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>milli1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//构建时间戳
</span><span style="color:#6272a4"></span>    
    Instant ins2 <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ofEpochSecond</span><span style="color:#ff79c6">(</span>60<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ins2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="时间--日期-差">时间 / 日期 差</h3>
<ul>
<li>Duration：计算两个时间之间的间隔</li>
<li>Period：计算两个日期之间的间隔</li>
<li>测试</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//计算两个时间之间的间隔 between
</span><span style="color:#6272a4"></span>    
    Instant ins1 <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">try</span> <span style="color:#ff79c6">{</span>
        Thread<span style="color:#ff79c6">.</span><span style="color:#50fa7b">sleep</span><span style="color:#ff79c6">(</span>1000<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">catch</span> <span style="color:#ff79c6">(</span>InterruptedException e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">printStackTrace</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
    Instant ins2 <span style="color:#ff79c6">=</span> Instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Duration dura1 <span style="color:#ff79c6">=</span> Duration<span style="color:#ff79c6">.</span><span style="color:#50fa7b">between</span><span style="color:#ff79c6">(</span>ins1<span style="color:#ff79c6">,</span> ins2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dura1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSeconds</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>dura1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toMillis</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test04</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    LocalDate ld1 <span style="color:#ff79c6">=</span> LocalDate<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span>2016<span style="color:#ff79c6">,</span> 9<span style="color:#ff79c6">,</span> 1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    LocalDate ld2 <span style="color:#ff79c6">=</span> LocalDate<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Period period <span style="color:#ff79c6">=</span> Period<span style="color:#ff79c6">.</span><span style="color:#50fa7b">between</span><span style="color:#ff79c6">(</span>ld1<span style="color:#ff79c6">,</span> ld2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>  <span style="color:#6272a4">// ISO 标准
</span><span style="color:#6272a4"></span>    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>period<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getYears</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>period<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toTotalMonths</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="时间校正器">时间校正器</h3>
<ul>
<li>操纵日期：</li>
</ul>
<p>
  <img src="http://ww1.sinaimg.cn/large/006QQPIfly1guwr8pee6tj60j90bxtbo02.jpg" alt="QQ截图20210928232309.png">

</p>
<ul>
<li>测试</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//TemporalAdjusters：时间校正器
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt1 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//指定日期时间中的 年 月 日 ...
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt2 <span style="color:#ff79c6">=</span> ldt1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">withDayOfMonth</span><span style="color:#ff79c6">(</span>10<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//指定时间校正器
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt3 <span style="color:#ff79c6">=</span> ldt1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">with</span><span style="color:#ff79c6">(</span>TemporalAdjusters<span style="color:#ff79c6">.</span><span style="color:#50fa7b">next</span><span style="color:#ff79c6">(</span>DayOfWeek<span style="color:#ff79c6">.</span><span style="color:#50fa7b">SUNDAY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//自定义时间校正器
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt5 <span style="color:#ff79c6">=</span> ldt1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">with</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">(</span>ta<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">{</span>
        LocalDateTime ldt4 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>LocalDateTime<span style="color:#ff79c6">)</span> ta<span style="color:#ff79c6">;</span>
        DayOfWeek dow1 <span style="color:#ff79c6">=</span> ldt4<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getDayOfWeek</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>dow1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>DayOfWeek<span style="color:#ff79c6">.</span><span style="color:#50fa7b">FRIDAY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> ldt4<span style="color:#ff79c6">.</span><span style="color:#50fa7b">plusDays</span><span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>dow1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>DayOfWeek<span style="color:#ff79c6">.</span><span style="color:#50fa7b">SATURDAY</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> ldt4<span style="color:#ff79c6">.</span><span style="color:#50fa7b">plusDays</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">return</span> ldt4<span style="color:#ff79c6">.</span><span style="color:#50fa7b">plusDays</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt5<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="格式化">格式化</h3>
<ul>
<li>DateTimeFormatter：格式化时间 / 日期</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//默认格式化
</span><span style="color:#6272a4"></span>    
    DateTimeFormatter dtf1 <span style="color:#ff79c6">=</span> DateTimeFormatter<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ISO_DATE_TIME</span><span style="color:#ff79c6">;</span>
    LocalDateTime ldt1 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    String str1 <span style="color:#ff79c6">=</span> ldt1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">format</span><span style="color:#ff79c6">(</span>dtf1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>str1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//自定义格式化 ofPattern
</span><span style="color:#6272a4"></span>    
    DateTimeFormatter dtf2 <span style="color:#ff79c6">=</span> DateTimeFormatter<span style="color:#ff79c6">.</span><span style="color:#50fa7b">ofPattern</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    LocalDateTime ldt2 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    String str2 <span style="color:#ff79c6">=</span> ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">format</span><span style="color:#ff79c6">(</span>dtf2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>str2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//解析
</span><span style="color:#6272a4"></span>    
    LocalDateTime newDate <span style="color:#ff79c6">=</span> ldt1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">parse</span><span style="color:#ff79c6">(</span>str1<span style="color:#ff79c6">,</span> dtf1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>newDate<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="时区">时区</h3>
<ul>
<li>ZonedDate</li>
<li>ZonedTime</li>
<li>ZonedDateTime</li>
<li>测试</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test02</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
    <span style="color:#6272a4">//查看支持的时区
</span><span style="color:#6272a4"></span>    
    Set<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">&gt;</span> set <span style="color:#ff79c6">=</span> ZoneId<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAvailableZoneIds</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    set<span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>println<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//指定时区
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt1 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span>ZoneId<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Europe/Tallinn&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ldt1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

    <span style="color:#6272a4">//在已构建好的日期时间上指定时区
</span><span style="color:#6272a4"></span>    
    LocalDateTime ldt2 <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span>ZoneId<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Europe/Tallinn&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    ZonedDateTime zdt1 <span style="color:#ff79c6">=</span> ldt2<span style="color:#ff79c6">.</span><span style="color:#50fa7b">atZone</span><span style="color:#ff79c6">(</span>ZoneId<span style="color:#ff79c6">.</span><span style="color:#50fa7b">of</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Europe/Tallinn&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>zdt1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>

<span style="color:#6272a4">//转换
</span><span style="color:#6272a4"></span>
@Test
<span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test03</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">{</span>
	<span style="color:#6272a4">// Date 转 LocalDateTime 
</span><span style="color:#6272a4"></span>    
	Date date <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Date<span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Instant instant <span style="color:#ff79c6">=</span> date<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toInstant</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    ZoneId zoneId <span style="color:#ff79c6">=</span> ZoneId<span style="color:#ff79c6">.</span><span style="color:#50fa7b">systemDefault</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    LocalDateTime localDateTime <span style="color:#ff79c6">=</span> instant<span style="color:#ff79c6">.</span><span style="color:#50fa7b">atZone</span><span style="color:#ff79c6">(</span>zoneId<span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">toLocalDateTime</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

	<span style="color:#6272a4">// LocalDateTime 转 Date
</span><span style="color:#6272a4"></span>    
	LocalDateTime localDateTime <span style="color:#ff79c6">=</span> LocalDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">now</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
	ZoneId zoneId <span style="color:#ff79c6">=</span> ZoneId<span style="color:#ff79c6">.</span><span style="color:#50fa7b">systemDefault</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    ZonedDateTime zdt <span style="color:#ff79c6">=</span> localDateTime<span style="color:#ff79c6">.</span><span style="color:#50fa7b">atZone</span><span style="color:#ff79c6">(</span>zoneId<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    Date date <span style="color:#ff79c6">=</span> Date<span style="color:#ff79c6">.</span><span style="color:#50fa7b">from</span><span style="color:#ff79c6">(</span>zdt<span style="color:#ff79c6">.</span><span style="color:#50fa7b">toInstant</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
	
	<span style="color:#6272a4">// 原则：利用 时间戳Instant
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">}</span>
</code></pre></div><h2 id="注解">注解</h2>
<h3 id="重复注解">重复注解</h3>
<ul>
<li>定义注解：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Repeatable<span style="color:#ff79c6">(</span>MyAnnotations<span style="color:#ff79c6">.</span><span style="color:#50fa7b">class</span><span style="color:#ff79c6">)</span> <span style="color:#6272a4">//指定容器类
</span><span style="color:#6272a4"></span>@Target<span style="color:#ff79c6">(</span><span style="color:#ff79c6">{</span>ElementType<span style="color:#ff79c6">.</span><span style="color:#50fa7b">TYPE</span><span style="color:#ff79c6">,</span> ElementType<span style="color:#ff79c6">.</span><span style="color:#50fa7b">METHOD</span><span style="color:#ff79c6">,</span>  ElementType<span style="color:#ff79c6">.</span><span style="color:#50fa7b">FIELD</span><span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span>
@Retention<span style="color:#ff79c6">(</span>RetentionPolicy<span style="color:#ff79c6">.</span><span style="color:#50fa7b">RUNTIME</span><span style="color:#ff79c6">)</span>
<span style="color:#8be9fd;font-style:italic">public</span> @interface MyAnnotation <span style="color:#ff79c6">{</span>

    String <span style="color:#50fa7b">value</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">default</span> <span style="color:#f1fa8c">&#34;Java 8&#34;</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>定义容器：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">@Target<span style="color:#ff79c6">(</span><span style="color:#ff79c6">{</span>ElementType<span style="color:#ff79c6">.</span><span style="color:#50fa7b">TYPE</span><span style="color:#ff79c6">,</span> ElementType<span style="color:#ff79c6">.</span><span style="color:#50fa7b">METHOD</span><span style="color:#ff79c6">,</span>  ElementType<span style="color:#ff79c6">.</span><span style="color:#50fa7b">FIELD</span><span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span>
@Retention<span style="color:#ff79c6">(</span>RetentionPolicy<span style="color:#ff79c6">.</span><span style="color:#50fa7b">RUNTIME</span><span style="color:#ff79c6">)</span>
<span style="color:#8be9fd;font-style:italic">public</span> @interface MyAnnotations <span style="color:#ff79c6">{</span>

    MyAnnotation<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span> <span style="color:#50fa7b">value</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>测试</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">Test01</span> <span style="color:#ff79c6">{</span>

    <span style="color:#6272a4">//重复注解
</span><span style="color:#6272a4"></span>    
    @Test
    @MyAnnotation<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Hello&#34;</span><span style="color:#ff79c6">)</span>
    @MyAnnotation<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;World&#34;</span><span style="color:#ff79c6">)</span>
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">test01</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">throws</span> NoSuchMethodException <span style="color:#ff79c6">{</span>
        Class<span style="color:#ff79c6">&lt;</span>Test01<span style="color:#ff79c6">&gt;</span> clazz <span style="color:#ff79c6">=</span> Test01<span style="color:#ff79c6">.</span><span style="color:#50fa7b">class</span><span style="color:#ff79c6">;</span>
        Method test01 <span style="color:#ff79c6">=</span> clazz<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getMethod</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;test01&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        MyAnnotation<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span> mas <span style="color:#ff79c6">=</span> test01<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getAnnotationsByType</span><span style="color:#ff79c6">(</span>MyAnnotation<span style="color:#ff79c6">.</span><span style="color:#50fa7b">class</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>MyAnnotation ma <span style="color:#ff79c6">:</span> mas<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>ma<span style="color:#ff79c6">.</span><span style="color:#50fa7b">value</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="类型注解">类型注解</h3>
<ul>
<li>Java 8 新增注解：新增ElementType.TYPE_USE 和ElementType.TYPE_PARAMETER（在Target上）</li>
</ul>
<h2 id="其他方法介绍">其他方法介绍</h2>
<h3 id="mapmerge方法">Map.merge方法</h3>
<ul>
<li><strong>merge方法有三个参数</strong>
<ul>
<li><strong>key</strong>：map中的键</li>
<li><strong>value</strong>：使用者传入的值</li>
<li><strong>remappingFunction</strong>：BiFunction函数接口(该接口接收两个值，旧的value和传入的新value ，执行自定义功能并返回最终值)</li>
</ul>
</li>
<li>key不存在等于是map.put(key, value),后面的处理失效 ；key存在,value就会变成你处理后的value值。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#6272a4">//源码
</span><span style="color:#6272a4"></span>
BiFunction<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">?</span> <span style="color:#8be9fd;font-style:italic">super</span> V<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">?</span> <span style="color:#8be9fd;font-style:italic">super</span> V<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">?</span> <span style="color:#8be9fd;font-style:italic">extends</span> V<span style="color:#ff79c6">&gt;</span> remappingFunction<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        Objects<span style="color:#ff79c6">.</span><span style="color:#50fa7b">requireNonNull</span><span style="color:#ff79c6">(</span>remappingFunction<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        Objects<span style="color:#ff79c6">.</span><span style="color:#50fa7b">requireNonNull</span><span style="color:#ff79c6">(</span>value<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        V oldValue <span style="color:#ff79c6">=</span> get<span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        V newValue <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>oldValue <span style="color:#ff79c6">=</span><span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">?</span> value <span style="color:#ff79c6">:</span>
                   remappingFunction<span style="color:#ff79c6">.</span><span style="color:#50fa7b">apply</span><span style="color:#ff79c6">(</span>oldValue<span style="color:#ff79c6">,</span> value<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">if</span><span style="color:#ff79c6">(</span>newValue <span style="color:#ff79c6">=</span><span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            remove<span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
            put<span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">,</span> newValue<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">return</span> newValue<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
</code></pre></div><ul>
<li>案例一：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">   <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">main</span><span style="color:#ff79c6">(</span>String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span> args<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        Map<span style="color:#ff79c6">&lt;</span>String<span style="color:#ff79c6">,</span> Integer<span style="color:#ff79c6">&gt;</span> map1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> HashMap<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">,</span>1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;b&#34;</span><span style="color:#ff79c6">,</span>2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;c&#34;</span><span style="color:#ff79c6">,</span>3<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#6272a4">//key不存在等于是map1.put(key, value),后面的处理失效。
</span><span style="color:#6272a4"></span>       
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">merge</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;d&#34;</span><span style="color:#ff79c6">,</span>4<span style="color:#ff79c6">,</span><span style="color:#ff79c6">(</span>v1<span style="color:#ff79c6">,</span>v2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span>v2<span style="color:#ff79c6">+</span>100<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#6272a4">//如果存在就会变成你处理后的value值
</span><span style="color:#6272a4"></span>       
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">merge</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">,</span>100<span style="color:#ff79c6">,</span><span style="color:#ff79c6">(</span>v1<span style="color:#ff79c6">,</span>v2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span>v1<span style="color:#ff79c6">+</span>v2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">merge</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;c&#34;</span><span style="color:#ff79c6">,</span>3<span style="color:#ff79c6">,</span>Integer<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>sum<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        map1<span style="color:#ff79c6">.</span><span style="color:#50fa7b">merge</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">,</span>4<span style="color:#ff79c6">,</span><span style="color:#ff79c6">(</span>v1<span style="color:#ff79c6">,</span>v2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">null</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#6272a4">//结果：
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">//{a=1, b=2, c=3}
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">//{a=101, b=2, c=3, d=4}
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">//{b=2, c=6, d=4}
</span></code></pre></div><ul>
<li>案例二
<ul>
<li>merge方法在统计时用的场景比较多，这里举一个统计学生总成绩的例子来说明。现在有一个学生各科成绩的集合，要统计每个学生的总成绩，以下给出使用merge方法与不使用的写法</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">StudentScoreSum</span> <span style="color:#ff79c6">{</span>
 
    @Data
    <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">StudentScore</span> <span style="color:#ff79c6">{</span>
        <span style="color:#8be9fd;font-style:italic">private</span> Integer sid<span style="color:#ff79c6">;</span>
        <span style="color:#8be9fd;font-style:italic">private</span> String scoreName<span style="color:#ff79c6">;</span>
        <span style="color:#8be9fd;font-style:italic">private</span> Integer score<span style="color:#ff79c6">;</span>
 
        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">StudentScore</span><span style="color:#ff79c6">(</span>Integer sid<span style="color:#ff79c6">,</span> String scoreName<span style="color:#ff79c6">,</span> Integer score<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">sid</span> <span style="color:#ff79c6">=</span> sid<span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">scoreName</span> <span style="color:#ff79c6">=</span> scoreName<span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">score</span> <span style="color:#ff79c6">=</span> score<span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
 
        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">StudentScore</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
 
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">main</span><span style="color:#ff79c6">(</span>String<span style="color:#ff79c6">[</span><span style="color:#ff79c6">]</span> args<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        List<span style="color:#ff79c6">&lt;</span>StudentScore<span style="color:#ff79c6">&gt;</span> list <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;chinese&#34;</span><span style="color:#ff79c6">,</span> 110<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;english&#34;</span><span style="color:#ff79c6">,</span> 120<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;math&#34;</span><span style="color:#ff79c6">,</span> 135<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;chinese&#34;</span><span style="color:#ff79c6">,</span> 99<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;english&#34;</span><span style="color:#ff79c6">,</span> 100<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;math&#34;</span><span style="color:#ff79c6">,</span> 133<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;chinese&#34;</span><span style="color:#ff79c6">,</span> 88<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;english&#34;</span><span style="color:#ff79c6">,</span> 140<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;math&#34;</span><span style="color:#ff79c6">,</span> 90<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>4<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;chinese&#34;</span><span style="color:#ff79c6">,</span> 108<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>4<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;english&#34;</span><span style="color:#ff79c6">,</span> 123<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>4<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;math&#34;</span><span style="color:#ff79c6">,</span> 114<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>5<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;chinese&#34;</span><span style="color:#ff79c6">,</span> 116<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>5<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;english&#34;</span><span style="color:#ff79c6">,</span> 133<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">add</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> StudentScore<span style="color:#ff79c6">(</span>5<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;math&#34;</span><span style="color:#ff79c6">,</span> 135<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
 
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>sum1<span style="color:#ff79c6">(</span>list<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>sum2<span style="color:#ff79c6">(</span>list<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
    <span style="color:#6272a4">//传统写法
</span><span style="color:#6272a4"></span>    
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> Integer<span style="color:#ff79c6">&gt;</span> <span style="color:#50fa7b">sum1</span><span style="color:#ff79c6">(</span>List<span style="color:#ff79c6">&lt;</span>StudentScore<span style="color:#ff79c6">&gt;</span> list<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> Integer<span style="color:#ff79c6">&gt;</span> map <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> HashMap<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>StudentScore studentScore <span style="color:#ff79c6">:</span> list<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">containsKey</span><span style="color:#ff79c6">(</span>studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSid</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSid</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span>
                        map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span>studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSid</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">+</span> studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getScore</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
                map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSid</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span> studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getScore</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">return</span> map<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
 
    <span style="color:#6272a4">//merger写法
</span><span style="color:#6272a4"></span>    
    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> Integer<span style="color:#ff79c6">&gt;</span> <span style="color:#50fa7b">sum2</span><span style="color:#ff79c6">(</span>List<span style="color:#ff79c6">&lt;</span>StudentScore<span style="color:#ff79c6">&gt;</span> list<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> Integer<span style="color:#ff79c6">&gt;</span> map <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> HashMap<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        list<span style="color:#ff79c6">.</span><span style="color:#50fa7b">stream</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">forEach</span><span style="color:#ff79c6">(</span>studentScore <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">merge</span><span style="color:#ff79c6">(</span>studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSid</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span>
                <span style="color:#ff79c6">,</span> studentScore<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getScore</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">,</span> Integer<span style="color:#ff79c6">:</span><span style="color:#ff79c6">:</span>sum<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">return</span> map<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="mapcompute方法">Map.compute方法</h3>
<ul>
<li>里面核心是用<strong>concurrentHashMap</strong>实现的，线程安全。</li>
<li><strong>compute :计算，Absent：不存在，Present：不存在</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Map<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">,</span> String<span style="color:#ff79c6">&gt;</span> map <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> HashMap<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;a&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;b&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">,</span> &#34;c”<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
</code></pre></div><ul>
<li>
<p><strong>computeIfAbsent 方法</strong></p>
<ul>
<li>如果指定的key不存在，则通过指定的K -&gt; V计算出新的值设置为key的值</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">computeIfAbsent</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> key <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> key <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34; computed&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#6272a4">// 存在key为1，则不进行计算，输出值 a
</span><span style="color:#6272a4"></span>
System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">computeIfAbsent</span><span style="color:#ff79c6">(</span>4<span style="color:#ff79c6">,</span> key <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> key <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34; computed&#34;</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#6272a4">// 不存在key为4，则进行计算，输出值 4 computed
</span><span style="color:#6272a4"></span>
System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span>4<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
</code></pre></div><ul>
<li>
<p><strong>computeIfPresent 方法</strong></p>
<ul>
<li>如果指定的key存在，则根据旧的key和value计算新的值newValue, 如果newValue不为null，则设置key新的值为newValue, 如果newValue为null, 则删除该key的值</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">computeIfPresent</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">,</span> value<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">(</span>key <span style="color:#ff79c6">+</span> 1<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">+</span> value<span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#6272a4">// 存在key为1， 则根据旧的key和value计算新的值，输出 2a
</span><span style="color:#6272a4"></span>
System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>

map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">computeIfPresent</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> <span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">,</span> value<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">null</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
<span style="color:#6272a4">// 存在key为2， 根据旧的key和value计算得到null，删除该值，输出 null
</span><span style="color:#6272a4"></span>
System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>map<span style="color:#ff79c6">.</span><span style="color:#50fa7b">get</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">)</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">;</span>
</code></pre></div><ul>
<li>compute 方法
<ul>
<li>compute方法是computeIfAbsent与computeIfPresent的综合体</li>
</ul>
</li>
</ul>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/881java7%E6%96%B0%E7%89%B9%E6%80%A7/" data-toggle="tooltip" data-placement="top" title="2、Java7新特性（Java7）">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/883docker%E8%AF%A6%E8%A7%A3/" data-toggle="tooltip" data-placement="top" title="2、Doker详解（Docker）">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>
                

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">标签</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/tags/activemq" title="activemq">
                            activemq
                        </a>
                        
                        
                        
                        <a href="/tags/ajax" title="ajax">
                            ajax
                        </a>
                        
                        
                        
                        <a href="/tags/cookie" title="cookie">
                            cookie
                        </a>
                        
                        
                        
                        <a href="/tags/datax" title="datax">
                            datax
                        </a>
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        <a href="/tags/elasticsearch" title="elasticsearch">
                            elasticsearch
                        </a>
                        
                        
                        
                        <a href="/tags/filter" title="filter">
                            filter
                        </a>
                        
                        
                        
                        <a href="/tags/hadoop" title="hadoop">
                            hadoop
                        </a>
                        
                        
                        
                        <a href="/tags/hbase" title="hbase">
                            hbase
                        </a>
                        
                        
                        
                        <a href="/tags/hive" title="hive">
                            hive
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/java" title="java">
                            java
                        </a>
                        
                        
                        
                        <a href="/tags/javascript" title="javascript">
                            javascript
                        </a>
                        
                        
                        
                        <a href="/tags/javaweb" title="javaweb">
                            javaweb
                        </a>
                        
                        
                        
                        <a href="/tags/jdbc" title="jdbc">
                            jdbc
                        </a>
                        
                        
                        
                        <a href="/tags/jquery" title="jquery">
                            jquery
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/jsp" title="jsp">
                            jsp
                        </a>
                        
                        
                        
                        <a href="/tags/juc" title="juc">
                            juc
                        </a>
                        
                        
                        
                        <a href="/tags/jvm" title="jvm">
                            jvm
                        </a>
                        
                        
                        
                        <a href="/tags/jwt" title="jwt">
                            jwt
                        </a>
                        
                        
                        
                        <a href="/tags/kafka" title="kafka">
                            kafka
                        </a>
                        
                        
                        
                        <a href="/tags/linux" title="linux">
                            linux
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/maven" title="maven">
                            maven
                        </a>
                        
                        
                        
                        <a href="/tags/minio" title="minio">
                            minio
                        </a>
                        
                        
                        
                        <a href="/tags/mongodb" title="mongodb">
                            mongodb
                        </a>
                        
                        
                        
                        <a href="/tags/mybatis" title="mybatis">
                            mybatis
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/mysql" title="mysql">
                            mysql
                        </a>
                        
                        
                        
                        <a href="/tags/netty" title="netty">
                            netty
                        </a>
                        
                        
                        
                        <a href="/tags/nginx" title="nginx">
                            nginx
                        </a>
                        
                        
                        
                        <a href="/tags/react" title="react">
                            react
                        </a>
                        
                        
                        
                        <a href="/tags/redis" title="redis">
                            redis
                        </a>
                        
                        
                        
                        <a href="/tags/scala" title="scala">
                            scala
                        </a>
                        
                        
                        
                        <a href="/tags/servlet" title="servlet">
                            servlet
                        </a>
                        
                        
                        
                        <a href="/tags/session" title="session">
                            session
                        </a>
                        
                        
                        
                        <a href="/tags/shiro" title="shiro">
                            shiro
                        </a>
                        
                        
                        
                        <a href="/tags/spark" title="spark">
                            spark
                        </a>
                        
                        
                        
                        <a href="/tags/spring" title="spring">
                            spring
                        </a>
                        
                        
                        
                        <a href="/tags/springboot" title="springboot">
                            springboot
                        </a>
                        
                        
                        
                        <a href="/tags/springcloud" title="springcloud">
                            springcloud
                        </a>
                        
                        
                        
                        <a href="/tags/springmvc" title="springmvc">
                            springmvc
                        </a>
                        
                        
                        
                        <a href="/tags/springsecurity" title="springsecurity">
                            springsecurity
                        </a>
                        
                        
                        
                        <a href="/tags/tomcat" title="tomcat">
                            tomcat
                        </a>
                        
                        
                        
                        <a href="/tags/vue" title="vue">
                            vue
                        </a>
                        
                        
                        
                        <a href="/tags/xml" title="xml">
                            xml
                        </a>
                        
                        
                        
                        <a href="/tags/zookeeper" title="zookeeper">
                            zookeeper
                        </a>
                        
                        
                        
                        <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95" title="数据结构与算法">
                            数据结构与算法
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="设计模式">
                            设计模式
                        </a>
                        
                        
                        
                        <a href="/tags/%E9%A1%B9%E7%9B%AE" title="项目">
                            项目
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">                  
                    
                    <li>
                        <a href="mailto:1424197205@qq.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		           
                    
                    
                    
                    

		            
                    
                    <li>
                        <a target="_blank" href="/#">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-weixin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    <li>
                        <a target="_blank" href="https://github.com/yiguan1573">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
           
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="亿观的博客" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
            
             </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 亿观的博客 2022
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>





</body>
</html>
